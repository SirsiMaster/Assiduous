<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assiduous Realty - Properties Management</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --navy: #0B1F41;
            --sky: #60A3D9;
            --mist: #E2E8F0;
            --accent: #FFD940;
            --white: #FFFFFF;
            --success: #059669;
            --warning: #D97706;
            --danger: #DC2626;
            --gray-50: #FAFBFC;
            --gray-100: #F3F4F6;
            --gray-200: #E5E7EB;
            --gray-500: #6B7280;
            --gray-700: #374151;
        }
        
        body {
            font-family: 'Inter', -apple-system, sans-serif;
            font-size: 14px;
            background: linear-gradient(180deg, #F8FAFC 0%, #FFFFFF 100%);
            color: var(--gray-700);
            line-height: 1.5;
            min-height: 100vh;
        }
        
        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(226, 232, 240, 0.8);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-inner {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo-mark {
            width: 32px;
            height: 32px;
            background: var(--navy);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-weight: 700;
        }
        
        .nav {
            display: flex;
            gap: 24px;
        }
        
        .nav-link {
            color: var(--gray-500);
            text-decoration: none;
            font-size: 13px;
            font-weight: 500;
            transition: color 0.15s;
            position: relative;
            padding: 8px 0;
        }
        
        .nav-link:hover, .nav-link.active { color: var(--navy); }
        
        /* Main Layout */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 24px 20px;
        }
        
        /* Page Header */
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .page-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--navy);
        }
        
        .header-actions {
            display: flex;
            gap: 12px;
        }
        
        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }
        
        .stat-card {
            background: var(--white);
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            padding: 20px;
        }
        
        .stat-label {
            font-size: 12px;
            color: var(--gray-500);
            text-transform: uppercase;
            letter-spacing: 0.025em;
            margin-bottom: 8px;
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--navy);
            margin-bottom: 8px;
        }
        
        .stat-trend {
            font-size: 12px;
            color: var(--success);
        }
        
        /* Filters */
        .filters {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .filter-group {
            display: flex;
            gap: 8px;
            flex: 1;
            min-width: 200px;
        }
        
        /* Properties Grid */
        .properties-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }
        
        .property-card {
            background: var(--white);
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.2s;
            cursor: pointer;
        }
        
        .property-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transform: translateY(-2px);
        }
        
        .property-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, var(--sky), var(--navy));
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 48px;
        }
        
        .property-status {
            position: absolute;
            top: 12px;
            right: 12px;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .status-available {
            background: var(--success);
            color: var(--white);
        }
        
        .status-pending {
            background: var(--warning);
            color: var(--white);
        }
        
        .status-sold {
            background: var(--danger);
            color: var(--white);
        }
        
        .property-details {
            padding: 16px;
        }
        
        .property-price {
            font-size: 20px;
            font-weight: 700;
            color: var(--navy);
            margin-bottom: 8px;
        }
        
        .property-address {
            font-size: 13px;
            color: var(--gray-500);
            margin-bottom: 12px;
        }
        
        .property-features {
            display: flex;
            gap: 16px;
            margin-bottom: 12px;
            font-size: 12px;
            color: var(--gray-600);
        }
        
        .property-actions {
            display: flex;
            gap: 8px;
            padding-top: 12px;
            border-top: 1px solid var(--gray-100);
        }
        
        /* Buttons */
        .btn {
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.15s;
            border: none;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        
        .btn-primary {
            background: var(--sky);
            color: var(--white);
        }
        
        .btn-primary:hover {
            background: #4A8BC4;
        }
        
        .btn-secondary {
            background: var(--white);
            color: var(--gray-600);
            border: 1px solid var(--gray-200);
        }
        
        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
        }
        
        /* Form Elements */
        .form-input, .form-select {
            padding: 8px 12px;
            border: 1px solid var(--gray-200);
            border-radius: 6px;
            font-size: 13px;
            background: var(--white);
            transition: border 0.15s;
        }
        
        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--sky);
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            padding: 40px;
            overflow-y: auto;
        }
        
        .modal.active {
            display: flex;
            align-items: flex-start;
            justify-content: center;
        }
        
        .modal-content {
            background: var(--white);
            border-radius: 12px;
            width: 100%;
            max-width: 800px;
            padding: 32px;
            margin-top: 40px;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .modal-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--navy);
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-label {
            font-size: 13px;
            font-weight: 500;
            color: var(--gray-700);
            margin-bottom: 6px;
        }
        
        .form-textarea {
            padding: 8px 12px;
            border: 1px solid var(--gray-200);
            border-radius: 6px;
            font-size: 13px;
            font-family: inherit;
            resize: vertical;
            min-height: 100px;
        }
        
        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            padding-top: 24px;
            border-top: 1px solid var(--gray-100);
        }
        
        /* Image Upload */
        .image-upload {
            border: 2px dashed var(--gray-300);
            border-radius: 8px;
            padding: 32px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .image-upload:hover {
            border-color: var(--sky);
            background: var(--gray-50);
        }
        
        .upload-icon {
            font-size: 48px;
            margin-bottom: 12px;
        }
        
        .upload-text {
            color: var(--gray-600);
            font-size: 14px;
        }
        
        /* Property Types */
        .property-types {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 16px;
        }
        
        .type-badge {
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.15s;
            border: 1px solid var(--gray-200);
            background: var(--white);
            color: var(--gray-600);
        }
        
        .type-badge.active {
            background: var(--sky);
            color: var(--white);
            border-color: var(--sky);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-inner">
            <div class="logo">
                <div class="logo-mark">A</div>
                <span style="font-weight: 600; color: var(--navy);">Assiduous Realty Backend</span>
            </div>
            
            <nav class="nav">
                <a href="../dashboard-refined.html" class="nav-link">Dashboard</a>
                <a href="../knowledge-base.html" class="nav-link">Docs</a>
                <a href="#" class="nav-link active">Properties</a>
                <a href="./agents.html" class="nav-link">Agents</a>
                <a href="./clients.html" class="nav-link">Clients</a>
                <a href="./transactions.html" class="nav-link">Transactions</a>
                <a href="./market.html" class="nav-link">Market</a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <!-- Page Header -->
        <div class="page-header">
            <h1 class="page-title">Property Management</h1>
            <div class="header-actions">
                <button class="btn btn-secondary" onclick="exportProperties()">
                    📊 Export
                </button>
                <button class="btn btn-primary" onclick="showAddProperty()">
                    ➕ Add Property
                </button>
            </div>
        </div>

        <!-- Stats Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">Total Properties</div>
                <div class="stat-value" id="totalProperties">0</div>
                <div class="stat-trend">↑ 12 this month</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Available</div>
                <div class="stat-value" id="availableProperties">0</div>
                <div class="stat-trend">68% of inventory</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Pending Deals</div>
                <div class="stat-value" id="pendingProperties">0</div>
                <div class="stat-trend">↑ 5 this week</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Total Value</div>
                <div class="stat-value" id="totalValue">$0M</div>
                <div class="stat-trend">Portfolio value</div>
            </div>
        </div>

        <!-- Filters -->
        <div class="filters">
            <div class="filter-group">
                <input type="text" class="form-input" placeholder="Search properties..." id="searchInput">
                <select class="form-select" id="typeFilter">
                    <option value="">All Types</option>
                    <option value="house">House</option>
                    <option value="apartment">Apartment</option>
                    <option value="condo">Condo</option>
                    <option value="townhouse">Townhouse</option>
                    <option value="commercial">Commercial</option>
                </select>
                <select class="form-select" id="statusFilter">
                    <option value="">All Status</option>
                    <option value="available">Available</option>
                    <option value="pending">Pending</option>
                    <option value="sold">Sold</option>
                </select>
                <select class="form-select" id="priceFilter">
                    <option value="">All Prices</option>
                    <option value="0-500000">Under $500K</option>
                    <option value="500000-1000000">$500K - $1M</option>
                    <option value="1000000-2000000">$1M - $2M</option>
                    <option value="2000000+">$2M+</option>
                </select>
            </div>
        </div>

        <!-- Property Types Quick Filter -->
        <div class="property-types">
            <span class="type-badge active" onclick="filterByType('all')">All Properties</span>
            <span class="type-badge" onclick="filterByType('featured')">⭐ Featured</span>
            <span class="type-badge" onclick="filterByType('new')">🆕 New Listings</span>
            <span class="type-badge" onclick="filterByType('reduced')">🔥 Price Reduced</span>
            <span class="type-badge" onclick="filterByType('luxury')">💎 Luxury</span>
        </div>

        <!-- Properties Grid -->
        <div class="properties-grid" id="propertiesGrid">
            <!-- Properties will be dynamically loaded here -->
        </div>
    </div>

    <!-- Add/Edit Property Modal -->
    <div id="propertyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Add New Property</h2>
                <button class="btn btn-sm btn-secondary" onclick="closeModal()">✕</button>
            </div>
            
            <form id="propertyForm">
                <!-- Basic Information -->
                <h3 style="font-size: 16px; margin-bottom: 16px; color: var(--navy);">Basic Information</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Property Title*</label>
                        <input type="text" class="form-input" id="propertyTitle" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Property Type*</label>
                        <select class="form-select" id="propertyType" required>
                            <option value="">Select Type</option>
                            <option value="house">House</option>
                            <option value="apartment">Apartment</option>
                            <option value="condo">Condo</option>
                            <option value="townhouse">Townhouse</option>
                            <option value="commercial">Commercial</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Price*</label>
                        <input type="number" class="form-input" id="propertyPrice" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Status*</label>
                        <select class="form-select" id="propertyStatus" required>
                            <option value="available">Available</option>
                            <option value="pending">Pending</option>
                            <option value="sold">Sold</option>
                        </select>
                    </div>
                </div>

                <!-- Location -->
                <h3 style="font-size: 16px; margin: 24px 0 16px; color: var(--navy);">Location</h3>
                <div class="form-grid">
                    <div class="form-group" style="grid-column: span 2;">
                        <label class="form-label">Street Address*</label>
                        <input type="text" class="form-input" id="propertyAddress" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">City*</label>
                        <input type="text" class="form-input" id="propertyCity" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">State</label>
                        <input type="text" class="form-input" id="propertyState">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ZIP Code</label>
                        <input type="text" class="form-input" id="propertyZip">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Neighborhood</label>
                        <input type="text" class="form-input" id="propertyNeighborhood">
                    </div>
                </div>

                <!-- Property Details -->
                <h3 style="font-size: 16px; margin: 24px 0 16px; color: var(--navy);">Property Details</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Bedrooms</label>
                        <input type="number" class="form-input" id="propertyBeds" min="0">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Bathrooms</label>
                        <input type="number" class="form-input" id="propertyBaths" min="0" step="0.5">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Square Feet</label>
                        <input type="number" class="form-input" id="propertySqft" min="0">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Lot Size (acres)</label>
                        <input type="number" class="form-input" id="propertyLotSize" min="0" step="0.1">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Year Built</label>
                        <input type="number" class="form-input" id="propertyYearBuilt" min="1800" max="2024">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Parking Spaces</label>
                        <input type="number" class="form-input" id="propertyParking" min="0">
                    </div>
                </div>

                <!-- Description -->
                <div class="form-group" style="margin-top: 16px;">
                    <label class="form-label">Description</label>
                    <textarea class="form-textarea" id="propertyDescription" rows="4"></textarea>
                </div>

                <!-- Image Upload -->
                <h3 style="font-size: 16px; margin: 24px 0 16px; color: var(--navy);">Property Images</h3>
                <div class="image-upload" onclick="document.getElementById('imageInput').click()">
                    <div class="upload-icon">📷</div>
                    <div class="upload-text">Click to upload images or drag and drop</div>
                    <input type="file" id="imageInput" multiple accept="image/*" style="display: none;">
                </div>

                <!-- Agent Assignment -->
                <h3 style="font-size: 16px; margin: 24px 0 16px; color: var(--navy);">Agent Assignment</h3>
                <div class="form-group">
                    <label class="form-label">Listing Agent</label>
                    <select class="form-select" id="propertyAgent">
                        <option value="">Select Agent</option>
                        <option value="1">John Smith</option>
                        <option value="2">Sarah Johnson</option>
                        <option value="3">Michael Chen</option>
                    </select>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Property</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Property data storage
        let properties = JSON.parse(localStorage.getItem('assiduousProperties') || '[]');
        
        // Initialize with sample data if empty
        if (properties.length === 0) {
            properties = [
                {
                    id: 1,
                    title: 'Modern Downtown Condo',
                    type: 'condo',
                    price: 850000,
                    status: 'available',
                    address: '123 Main Street',
                    city: 'San Francisco',
                    state: 'CA',
                    beds: 2,
                    baths: 2,
                    sqft: 1200,
                    image: '🏙️',
                    featured: true,
                    agent: 'John Smith'
                },
                {
                    id: 2,
                    title: 'Luxury Family Home',
                    type: 'house',
                    price: 2500000,
                    status: 'available',
                    address: '456 Oak Avenue',
                    city: 'Palo Alto',
                    state: 'CA',
                    beds: 5,
                    baths: 4,
                    sqft: 4500,
                    image: '🏡',
                    luxury: true,
                    agent: 'Sarah Johnson'
                },
                {
                    id: 3,
                    title: 'Investment Opportunity',
                    type: 'apartment',
                    price: 650000,
                    status: 'pending',
                    address: '789 Market Street',
                    city: 'San Jose',
                    state: 'CA',
                    beds: 1,
                    baths: 1,
                    sqft: 750,
                    image: '🏢',
                    reduced: true,
                    agent: 'Michael Chen'
                }
            ];
            localStorage.setItem('assiduousProperties', JSON.stringify(properties));
        }
        
        // Load and display properties
        function loadProperties(filter = {}) {
            const grid = document.getElementById('propertiesGrid');
            grid.innerHTML = '';
            
            let filteredProperties = [...properties];
            
            // Apply filters
            if (filter.search) {
                filteredProperties = filteredProperties.filter(p => 
                    p.title.toLowerCase().includes(filter.search.toLowerCase()) ||
                    p.address.toLowerCase().includes(filter.search.toLowerCase())
                );
            }
            
            if (filter.type) {
                filteredProperties = filteredProperties.filter(p => p.type === filter.type);
            }
            
            if (filter.status) {
                filteredProperties = filteredProperties.filter(p => p.status === filter.status);
            }
            
            // Display properties
            filteredProperties.forEach(property => {
                const card = document.createElement('div');
                card.className = 'property-card';
                card.innerHTML = `
                    <div class="property-image">
                        ${property.image || '🏠'}
                        <span class="property-status status-${property.status}">${property.status}</span>
                    </div>
                    <div class="property-details">
                        <div class="property-price">$${property.price.toLocaleString()}</div>
                        <div class="property-address">${property.address}, ${property.city}, ${property.state}</div>
                        <div class="property-features">
                            <span>🛏️ ${property.beds} Beds</span>
                            <span>🚿 ${property.baths} Baths</span>
                            <span>📏 ${property.sqft} sqft</span>
                        </div>
                        <div class="property-actions">
                            <button class="btn btn-sm btn-secondary" onclick="editProperty(${property.id})">Edit</button>
                            <button class="btn btn-sm btn-secondary" onclick="viewProperty(${property.id})">View</button>
                            <button class="btn btn-sm btn-primary" onclick="shareProperty(${property.id})">Share</button>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
            
            updateStats();
        }
        
        // Update statistics
        function updateStats() {
            const total = properties.length;
            const available = properties.filter(p => p.status === 'available').length;
            const pending = properties.filter(p => p.status === 'pending').length;
            const totalValue = properties.reduce((sum, p) => sum + p.price, 0);
            
            document.getElementById('totalProperties').textContent = total;
            document.getElementById('availableProperties').textContent = available;
            document.getElementById('pendingProperties').textContent = pending;
            document.getElementById('totalValue').textContent = `$${(totalValue / 1000000).toFixed(1)}M`;
        }
        
        // Modal functions
        function showAddProperty() {
            document.getElementById('propertyModal').classList.add('active');
            document.getElementById('propertyForm').reset();
        }
        
        function closeModal() {
            document.getElementById('propertyModal').classList.remove('active');
        }
        
        // Handle form submission
        document.getElementById('propertyForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const property = {
                id: Date.now(),
                title: document.getElementById('propertyTitle').value,
                type: document.getElementById('propertyType').value,
                price: parseInt(document.getElementById('propertyPrice').value),
                status: document.getElementById('propertyStatus').value,
                address: document.getElementById('propertyAddress').value,
                city: document.getElementById('propertyCity').value,
                state: document.getElementById('propertyState').value,
                beds: parseInt(document.getElementById('propertyBeds').value) || 0,
                baths: parseFloat(document.getElementById('propertyBaths').value) || 0,
                sqft: parseInt(document.getElementById('propertySqft').value) || 0,
                description: document.getElementById('propertyDescription').value,
                agent: document.getElementById('propertyAgent').options[document.getElementById('propertyAgent').selectedIndex].text,
                image: '🏠',
                createdAt: new Date().toISOString()
            };
            
            properties.unshift(property);
            localStorage.setItem('assiduousProperties', JSON.stringify(properties));
            
            loadProperties();
            closeModal();
            
            // Show success message
            showNotification('Property added successfully!');
        });
        
        // Filter handlers
        document.getElementById('searchInput').addEventListener('input', function() {
            loadProperties({ search: this.value });
        });
        
        document.getElementById('typeFilter').addEventListener('change', function() {
            loadProperties({ type: this.value });
        });
        
        document.getElementById('statusFilter').addEventListener('change', function() {
            loadProperties({ status: this.value });
        });
        
        // Property type badges
        function filterByType(type) {
            document.querySelectorAll('.type-badge').forEach(badge => {
                badge.classList.remove('active');
            });
            event.target.classList.add('active');
            
            if (type === 'all') {
                loadProperties();
            } else {
                loadProperties({ [type]: true });
            }
        }
        
        // Property actions
        function editProperty(id) {
            const property = properties.find(p => p.id === id);
            if (property) {
                // Populate form with property data
                document.getElementById('propertyTitle').value = property.title;
                document.getElementById('propertyType').value = property.type;
                document.getElementById('propertyPrice').value = property.price;
                document.getElementById('propertyStatus').value = property.status;
                document.getElementById('propertyAddress').value = property.address;
                document.getElementById('propertyCity').value = property.city;
                document.getElementById('propertyState').value = property.state;
                
                showAddProperty();
            }
        }
        
        function viewProperty(id) {
            window.location.href = `property-detail.html?id=${id}`;
        }
        
        function shareProperty(id) {
            const property = properties.find(p => p.id === id);
            if (property) {
                const url = `${window.location.origin}/property/${id}`;
                navigator.clipboard.writeText(url);
                showNotification('Property link copied to clipboard!');
            }
        }
        
        function exportProperties() {
            const csv = [
                ['Title', 'Type', 'Price', 'Status', 'Address', 'City', 'Beds', 'Baths', 'SqFt'],
                ...properties.map(p => [
                    p.title,
                    p.type,
                    p.price,
                    p.status,
                    p.address,
                    p.city,
                    p.beds,
                    p.baths,
                    p.sqft
                ])
            ].map(row => row.join(',')).join('\n');
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'properties.csv';
            a.click();
            URL.revokeObjectURL(url);
        }
        
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--success);
                color: white;
                padding: 12px 20px;
                border-radius: 6px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.1);
                z-index: 10000;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => notification.remove(), 3000);
        }
        
        // Initialize
        loadProperties();
    </script>
</body>
</html>
