<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assiduous Realty - Agents Management</title>
    
    <!-- Assiduous Design System -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../assiduous.css">
    
    <style>
        /* Agents page specific styles */
        
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--space-xl) var(--space-lg);
        }
        
        /* Performance Stats */
        .performance-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-md);
            margin-bottom: var(--space-2xl);
        }
        
        .stat-card {
            background: white;
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
        }
        
        .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.025em;
            margin-bottom: var(--space-sm);
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: var(--space-sm);
        }
        
        .stat-trend {
            font-size: 12px;
            color: var(--success);
        }
        
        /* Agent Cards Grid */
        .agents-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: var(--space-lg);
            margin-bottom: var(--space-2xl);
        }
        
        .agent-card {
            background: white;
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
            text-align: center;
            transition: all 0.2s;
            cursor: pointer;
            position: relative;
        }
        
        .agent-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }
        
        .agent-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--gradient);
            margin: 0 auto var(--space-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
            font-weight: 600;
        }
        
        .agent-status {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--success);
            border: 2px solid white;
        }
        
        .agent-status.offline {
            background: var(--text-muted);
        }
        
        .agent-name {
            font-size: 16px;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: var(--space-xs);
        }
        
        .agent-role {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: var(--space-md);
        }
        
        .agent-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            padding: 16px 0;
            border-top: 1px solid var(--gray-100);
            border-bottom: 1px solid var(--gray-100);
            margin-bottom: 16px;
        }
        
        .agent-stat {
            text-align: center;
        }
        
        .agent-stat-value {
            font-size: 18px;
            font-weight: 600;
            color: var(--navy);
        }
        
        .agent-stat-label {
            font-size: 11px;
            color: var(--gray-500);
            text-transform: uppercase;
        }
        
        .agent-actions {
            display: flex;
            gap: 8px;
            justify-content: center;
        }
        
        /* Performance Chart */
        .performance-section {
            background: var(--white);
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 32px;
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        /* Commission Table */
        .commission-table {
            background: var(--white);
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .table th {
            background: var(--gray-50);
            padding: 12px 16px;
            text-align: left;
            font-size: 12px;
            font-weight: 600;
            color: var(--gray-600);
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }
        
        .table td {
            padding: 14px 16px;
            font-size: 13px;
            color: var(--gray-700);
            border-top: 1px solid var(--gray-100);
        }
        
        /* Buttons */
        .btn {
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.15s;
            border: none;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        
        .btn-primary {
            background: var(--sky);
            color: var(--white);
        }
        
        .btn-secondary {
            background: var(--white);
            color: var(--gray-600);
            border: 1px solid var(--gray-200);
        }
        
        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
        }
        
        /* Filter Tabs */
        .filter-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
        }
        
        .tab {
            padding: 8px 16px;
            background: var(--white);
            border: 1px solid var(--gray-200);
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            color: var(--gray-600);
            cursor: pointer;
            transition: all 0.15s;
        }
        
        .tab.active {
            background: var(--sky);
            color: var(--white);
            border-color: var(--sky);
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            padding: 40px;
            overflow-y: auto;
        }
        
        .modal.active {
            display: flex;
            align-items: flex-start;
            justify-content: center;
        }
        
        .modal-content {
            background: var(--white);
            border-radius: 12px;
            width: 100%;
            max-width: 600px;
            padding: 32px;
            margin-top: 40px;
        }
        
        .form-group {
            margin-bottom: 16px;
        }
        
        .form-label {
            display: block;
            font-size: 13px;
            font-weight: 500;
            color: var(--gray-700);
            margin-bottom: 6px;
        }
        
        .form-input, .form-select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid var(--gray-200);
            border-radius: 6px;
            font-size: 13px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }
        
        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            margin-top: 24px;
            padding-top: 24px;
            border-top: 1px solid var(--gray-100);
        }
        
        /* Leaderboard */
        .leaderboard {
            background: var(--white);
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 32px;
        }
        
        .leaderboard-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 12px 0;
            border-bottom: 1px solid var(--gray-100);
        }
        
        .leaderboard-rank {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--gray-100);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 12px;
        }
        
        .leaderboard-rank.gold {
            background: #FFD700;
            color: var(--navy);
            font-weight: 700;
        }
        
        .leaderboard-rank.silver {
            background: #C0C0C0;
            color: var(--navy);
            font-weight: 700;
        }
        
        .leaderboard-rank.bronze {
            background: #CD7F32;
            color: var(--white);
            font-weight: 700;
        }
        
        .leaderboard-info {
            flex: 1;
        }
        
        .leaderboard-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--navy);
        }
        
        .leaderboard-metric {
            font-size: 12px;
            color: var(--gray-500);
        }
        
        .leaderboard-value {
            font-size: 16px;
            font-weight: 600;
            color: var(--sky);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-inner">
            <div class="logo">
                <div class="logo-mark">A</div>
                <span style="font-weight: 600; color: var(--navy);">Assiduous Realty Backend</span>
            </div>
            
            <nav class="nav">
                <a href="../dashboard.html" class="nav-link">Dashboard</a>
                <a href="../knowledge-base.html" class="nav-link">Docs</a>
                <a href="./properties.html" class="nav-link">Properties</a>
                <a href="#" class="nav-link active">Agents</a>
                <a href="./clients.html" class="nav-link">Clients</a>
                <a href="./transactions.html" class="nav-link">Transactions</a>
                <a href="./market.html" class="nav-link">Market</a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <!-- Page Header -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
            <h1 style="font-size: 24px; font-weight: 600; color: var(--navy);">Agent Management</h1>
            <div style="display: flex; gap: 12px;">
                <button class="btn btn-secondary" onclick="exportAgents()">📊 Export</button>
                <button class="btn btn-primary" onclick="showAddAgent()">➕ Add Agent</button>
            </div>
        </div>

        <!-- Performance Stats -->
        <div class="performance-stats">
            <div class="stat-card">
                <div class="stat-label">Total Agents</div>
                <div class="stat-value" id="totalAgents">0</div>
                <div class="stat-trend">↑ 3 new this month</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Active Listings</div>
                <div class="stat-value" id="activeListings">0</div>
                <div class="stat-trend">Across all agents</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Total Sales</div>
                <div class="stat-value" id="totalSales">$0M</div>
                <div class="stat-trend">↑ 18% from last month</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Avg Commission</div>
                <div class="stat-value" id="avgCommission">$0K</div>
                <div class="stat-trend">Per transaction</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Conversion Rate</div>
                <div class="stat-value" id="conversionRate">0%</div>
                <div class="stat-trend">Lead to sale</div>
            </div>
        </div>

        <!-- Filter Tabs -->
        <div class="filter-tabs">
            <div class="tab active" onclick="filterAgents('all')">All Agents</div>
            <div class="tab" onclick="filterAgents('top')">⭐ Top Performers</div>
            <div class="tab" onclick="filterAgents('new')">🆕 New Agents</div>
            <div class="tab" onclick="filterAgents('team-lead')">👥 Team Leads</div>
            <div class="tab" onclick="filterAgents('online')">🟢 Online Now</div>
        </div>

        <!-- Monthly Leaderboard -->
        <div class="leaderboard">
            <h3 style="font-size: 16px; font-weight: 600; color: var(--navy); margin-bottom: 20px;">
                🏆 Top Performers - October 2024
            </h3>
            <div id="leaderboard-list">
                <!-- Dynamically populated -->
            </div>
        </div>

        <!-- Agents Grid -->
        <div class="agents-grid" id="agentsGrid">
            <!-- Agents will be dynamically loaded here -->
        </div>

        <!-- Commission Tracking -->
        <div class="commission-table">
            <div style="padding: 20px; border-bottom: 1px solid var(--gray-200);">
                <h3 style="font-size: 16px; font-weight: 600; color: var(--navy);">Recent Commissions</h3>
            </div>
            <table class="table">
                <thead>
                    <tr>
                        <th>Agent</th>
                        <th>Property</th>
                        <th>Sale Price</th>
                        <th>Commission Rate</th>
                        <th>Commission</th>
                        <th>Date</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="commissionsTable">
                    <!-- Dynamically populated -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Add/Edit Agent Modal -->
    <div id="agentModal" class="modal">
        <div class="modal-content">
            <h2 style="font-size: 20px; font-weight: 600; color: var(--navy); margin-bottom: 24px;">Add New Agent</h2>
            
            <form id="agentForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">First Name*</label>
                        <input type="text" class="form-input" id="firstName" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Last Name*</label>
                        <input type="text" class="form-input" id="lastName" required>
                    </div>
                </div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Email*</label>
                        <input type="email" class="form-input" id="email" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone*</label>
                        <input type="tel" class="form-input" id="phone" required>
                    </div>
                </div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Role</label>
                        <select class="form-select" id="role">
                            <option value="agent">Sales Agent</option>
                            <option value="senior">Senior Agent</option>
                            <option value="team-lead">Team Lead</option>
                            <option value="manager">Manager</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Commission Rate (%)</label>
                        <input type="number" class="form-input" id="commissionRate" min="0" max="100" step="0.1" value="3">
                    </div>
                </div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">License Number</label>
                        <input type="text" class="form-input" id="licenseNumber">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Start Date</label>
                        <input type="date" class="form-input" id="startDate">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Specializations</label>
                    <select class="form-select" id="specializations" multiple style="min-height: 100px;">
                        <option value="residential">Residential</option>
                        <option value="commercial">Commercial</option>
                        <option value="luxury">Luxury Properties</option>
                        <option value="first-time">First-time Buyers</option>
                        <option value="investment">Investment Properties</option>
                        <option value="rentals">Rentals</option>
                    </select>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Agent</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Agent data storage
        let agents = JSON.parse(localStorage.getItem('assiduousAgents') || '[]');
        let commissions = JSON.parse(localStorage.getItem('assiduousCommissions') || '[]');
        
        // Initialize with sample data if empty
        if (agents.length === 0) {
            agents = [
                {
                    id: 1,
                    firstName: 'John',
                    lastName: 'Smith',
                    email: 'john.smith@assiduous.com',
                    phone: '555-0101',
                    role: 'senior',
                    commissionRate: 3.5,
                    listings: 12,
                    sales: 45,
                    revenue: 8500000,
                    online: true,
                    avatar: 'JS',
                    performance: 'top',
                    joinDate: '2022-01-15'
                },
                {
                    id: 2,
                    firstName: 'Sarah',
                    lastName: 'Johnson',
                    email: 'sarah.j@assiduous.com',
                    phone: '555-0102',
                    role: 'team-lead',
                    commissionRate: 4,
                    listings: 18,
                    sales: 62,
                    revenue: 12000000,
                    online: true,
                    avatar: 'SJ',
                    performance: 'top',
                    joinDate: '2021-06-01'
                },
                {
                    id: 3,
                    firstName: 'Michael',
                    lastName: 'Chen',
                    email: 'michael.c@assiduous.com',
                    phone: '555-0103',
                    role: 'agent',
                    commissionRate: 3,
                    listings: 8,
                    sales: 15,
                    revenue: 3200000,
                    online: false,
                    avatar: 'MC',
                    performance: 'standard',
                    joinDate: '2023-03-10'
                },
                {
                    id: 4,
                    firstName: 'Emily',
                    lastName: 'Davis',
                    email: 'emily.d@assiduous.com',
                    phone: '555-0104',
                    role: 'agent',
                    commissionRate: 3,
                    listings: 6,
                    sales: 8,
                    revenue: 1800000,
                    online: true,
                    avatar: 'ED',
                    performance: 'new',
                    joinDate: '2024-01-20'
                }
            ];
            localStorage.setItem('assiduousAgents', JSON.stringify(agents));
            
            // Sample commissions
            commissions = [
                {
                    id: 1,
                    agentId: 2,
                    agentName: 'Sarah Johnson',
                    property: 'Luxury Downtown Condo',
                    salePrice: 1200000,
                    rate: 4,
                    commission: 48000,
                    date: '2024-10-15',
                    status: 'paid'
                },
                {
                    id: 2,
                    agentId: 1,
                    agentName: 'John Smith',
                    property: 'Family Home - Oak Street',
                    salePrice: 850000,
                    rate: 3.5,
                    commission: 29750,
                    date: '2024-10-20',
                    status: 'pending'
                }
            ];
            localStorage.setItem('assiduousCommissions', JSON.stringify(commissions));
        }
        
        // Load and display agents
        function loadAgents(filter = 'all') {
            const grid = document.getElementById('agentsGrid');
            grid.innerHTML = '';
            
            let filteredAgents = [...agents];
            
            // Apply filters
            if (filter === 'top') {
                filteredAgents = filteredAgents.filter(a => a.performance === 'top');
            } else if (filter === 'new') {
                filteredAgents = filteredAgents.filter(a => a.performance === 'new');
            } else if (filter === 'team-lead') {
                filteredAgents = filteredAgents.filter(a => a.role === 'team-lead' || a.role === 'manager');
            } else if (filter === 'online') {
                filteredAgents = filteredAgents.filter(a => a.online);
            }
            
            // Display agents
            filteredAgents.forEach(agent => {
                const card = document.createElement('div');
                card.className = 'agent-card';
                card.innerHTML = `
                    <div class="agent-status ${agent.online ? '' : 'offline'}"></div>
                    <div class="agent-avatar">${agent.avatar}</div>
                    <div class="agent-name">${agent.firstName} ${agent.lastName}</div>
                    <div class="agent-role">${formatRole(agent.role)}</div>
                    <div class="agent-stats">
                        <div class="agent-stat">
                            <div class="agent-stat-value">${agent.listings}</div>
                            <div class="agent-stat-label">Listings</div>
                        </div>
                        <div class="agent-stat">
                            <div class="agent-stat-value">${agent.sales}</div>
                            <div class="agent-stat-label">Sales</div>
                        </div>
                        <div class="agent-stat">
                            <div class="agent-stat-value">$${(agent.revenue / 1000000).toFixed(1)}M</div>
                            <div class="agent-stat-label">Revenue</div>
                        </div>
                    </div>
                    <div class="agent-actions">
                        <button class="btn btn-sm btn-secondary" onclick="viewAgent(${agent.id})">View</button>
                        <button class="btn btn-sm btn-secondary" onclick="editAgent(${agent.id})">Edit</button>
                        <button class="btn btn-sm btn-primary" onclick="contactAgent(${agent.id})">Contact</button>
                    </div>
                `;
                grid.appendChild(card);
            });
            
            updateStats();
            loadLeaderboard();
            loadCommissions();
        }
        
        // Update statistics
        function updateStats() {
            const totalAgents = agents.length;
            const totalListings = agents.reduce((sum, a) => sum + a.listings, 0);
            const totalRevenue = agents.reduce((sum, a) => sum + a.revenue, 0);
            const avgCommission = commissions.length > 0 
                ? commissions.reduce((sum, c) => sum + c.commission, 0) / commissions.length 
                : 0;
            const totalSales = agents.reduce((sum, a) => sum + a.sales, 0);
            const conversionRate = totalListings > 0 ? ((totalSales / (totalListings * 3)) * 100).toFixed(1) : 0;
            
            document.getElementById('totalAgents').textContent = totalAgents;
            document.getElementById('activeListings').textContent = totalListings;
            document.getElementById('totalSales').textContent = `$${(totalRevenue / 1000000).toFixed(1)}M`;
            document.getElementById('avgCommission').textContent = `$${(avgCommission / 1000).toFixed(1)}K`;
            document.getElementById('conversionRate').textContent = `${conversionRate}%`;
        }
        
        // Load leaderboard
        function loadLeaderboard() {
            const leaderboardList = document.getElementById('leaderboard-list');
            leaderboardList.innerHTML = '';
            
            const sortedAgents = [...agents].sort((a, b) => b.revenue - a.revenue).slice(0, 5);
            
            sortedAgents.forEach((agent, index) => {
                const rankClass = index === 0 ? 'gold' : index === 1 ? 'silver' : index === 2 ? 'bronze' : '';
                const item = document.createElement('div');
                item.className = 'leaderboard-item';
                item.innerHTML = `
                    <div class="leaderboard-rank ${rankClass}">${index + 1}</div>
                    <div class="leaderboard-info">
                        <div class="leaderboard-name">${agent.firstName} ${agent.lastName}</div>
                        <div class="leaderboard-metric">${agent.sales} sales • ${agent.listings} listings</div>
                    </div>
                    <div class="leaderboard-value">$${(agent.revenue / 1000000).toFixed(2)}M</div>
                `;
                leaderboardList.appendChild(item);
            });
        }
        
        // Load commissions table
        function loadCommissions() {
            const tbody = document.getElementById('commissionsTable');
            tbody.innerHTML = '';
            
            commissions.forEach(commission => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${commission.agentName}</td>
                    <td>${commission.property}</td>
                    <td>$${commission.salePrice.toLocaleString()}</td>
                    <td>${commission.rate}%</td>
                    <td>$${commission.commission.toLocaleString()}</td>
                    <td>${new Date(commission.date).toLocaleDateString()}</td>
                    <td>
                        <span style="padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: 500; 
                            background: ${commission.status === 'paid' ? 'rgba(5, 150, 105, 0.1)' : 'rgba(217, 119, 6, 0.1)'}; 
                            color: ${commission.status === 'paid' ? 'var(--success)' : 'var(--warning)'};">
                            ${commission.status}
                        </span>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }
        
        // Helper functions
        function formatRole(role) {
            const roles = {
                'agent': 'Sales Agent',
                'senior': 'Senior Agent',
                'team-lead': 'Team Lead',
                'manager': 'Manager'
            };
            return roles[role] || role;
        }
        
        // Filter agents
        function filterAgents(filter) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            loadAgents(filter);
        }
        
        // Modal functions
        function showAddAgent() {
            document.getElementById('agentModal').classList.add('active');
            document.getElementById('agentForm').reset();
        }
        
        function closeModal() {
            document.getElementById('agentModal').classList.remove('active');
        }
        
        // Handle form submission
        document.getElementById('agentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const agent = {
                id: Date.now(),
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                role: document.getElementById('role').value,
                commissionRate: parseFloat(document.getElementById('commissionRate').value),
                licenseNumber: document.getElementById('licenseNumber').value,
                startDate: document.getElementById('startDate').value,
                listings: 0,
                sales: 0,
                revenue: 0,
                online: false,
                avatar: document.getElementById('firstName').value.charAt(0) + document.getElementById('lastName').value.charAt(0),
                performance: 'new',
                createdAt: new Date().toISOString()
            };
            
            agents.unshift(agent);
            localStorage.setItem('assiduousAgents', JSON.stringify(agents));
            
            loadAgents();
            closeModal();
            
            showNotification('Agent added successfully!');
        });
        
        // Agent actions
        function viewAgent(id) {
            window.location.href = `agent-profile.html?id=${id}`;
        }
        
        function editAgent(id) {
            const agent = agents.find(a => a.id === id);
            if (agent) {
                document.getElementById('firstName').value = agent.firstName;
                document.getElementById('lastName').value = agent.lastName;
                document.getElementById('email').value = agent.email;
                document.getElementById('phone').value = agent.phone;
                document.getElementById('role').value = agent.role;
                document.getElementById('commissionRate').value = agent.commissionRate;
                
                showAddAgent();
            }
        }
        
        function contactAgent(id) {
            const agent = agents.find(a => a.id === id);
            if (agent) {
                window.location.href = `mailto:${agent.email}`;
            }
        }
        
        function exportAgents() {
            const csv = [
                ['Name', 'Email', 'Phone', 'Role', 'Listings', 'Sales', 'Revenue'],
                ...agents.map(a => [
                    `${a.firstName} ${a.lastName}`,
                    a.email,
                    a.phone,
                    a.role,
                    a.listings,
                    a.sales,
                    a.revenue
                ])
            ].map(row => row.join(',')).join('\n');
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'agents.csv';
            a.click();
            URL.revokeObjectURL(url);
        }
        
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--success);
                color: white;
                padding: 12px 20px;
                border-radius: 6px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.1);
                z-index: 10000;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => notification.remove(), 3000);
        }
        
        // Initialize
        loadAgents();
    </script>
</body>
</html>
