<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assiduous Realty - Market Analytics</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --navy: #0B1F41;
            --sky: #60A3D9;
            --mist: #E2E8F0;
            --accent: #FFD940;
            --white: #FFFFFF;
            --success: #059669;
            --warning: #D97706;
            --danger: #DC2626;
            --gray-50: #FAFBFC;
            --gray-100: #F3F4F6;
            --gray-200: #E5E7EB;
            --gray-500: #6B7280;
            --gray-700: #374151;
        }
        
        body {
            font-family: 'Inter', -apple-system, sans-serif;
            font-size: 14px;
            background: linear-gradient(180deg, #F8FAFC 0%, #FFFFFF 100%);
            color: var(--gray-700);
            min-height: 100vh;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(226, 232, 240, 0.8);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-inner {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo-mark {
            width: 32px;
            height: 32px;
            background: var(--navy);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-weight: 700;
        }
        
        .nav {
            display: flex;
            gap: 24px;
        }
        
        .nav-link {
            color: var(--gray-500);
            text-decoration: none;
            font-size: 13px;
            font-weight: 500;
            transition: color 0.15s;
            padding: 8px 0;
        }
        
        .nav-link:hover, .nav-link.active { color: var(--navy); }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 24px 20px;
        }
        
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .market-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }
        
        .metric-card {
            background: var(--white);
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            padding: 20px;
        }
        
        .metric-label {
            font-size: 12px;
            color: var(--gray-500);
            text-transform: uppercase;
            letter-spacing: 0.025em;
            margin-bottom: 8px;
        }
        
        .metric-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--navy);
            margin-bottom: 8px;
        }
        
        .metric-change {
            font-size: 12px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .metric-change.positive { color: var(--success); }
        .metric-change.negative { color: var(--danger); }
        
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }
        
        .chart-card {
            background: var(--white);
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            padding: 20px;
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .chart-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--navy);
        }
        
        .chart-content {
            height: 250px;
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            padding: 20px 0;
        }
        
        .bar {
            width: 40px;
            background: linear-gradient(to top, var(--sky), rgba(96, 163, 217, 0.7));
            border-radius: 4px 4px 0 0;
            position: relative;
            transition: transform 0.2s;
        }
        
        .bar:hover {
            transform: translateY(-4px);
        }
        
        .bar-label {
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 11px;
            color: var(--gray-500);
            white-space: nowrap;
        }
        
        .bar-value {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 12px;
            font-weight: 600;
            color: var(--navy);
        }
        
        .neighborhoods-table {
            background: var(--white);
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            overflow: hidden;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        thead {
            background: var(--gray-50);
            border-bottom: 1px solid var(--gray-200);
        }
        
        th {
            padding: 12px 16px;
            text-align: left;
            font-size: 12px;
            font-weight: 600;
            color: var(--gray-700);
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }
        
        td {
            padding: 16px;
            border-bottom: 1px solid var(--gray-100);
            font-size: 13px;
        }
        
        .trend-indicator {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-weight: 500;
        }
        
        .trend-indicator.up { color: var(--success); }
        .trend-indicator.down { color: var(--danger); }
        
        .btn {
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.15s;
            border: none;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        
        .btn-primary {
            background: var(--sky);
            color: var(--white);
        }
        
        .btn-secondary {
            background: var(--white);
            color: var(--gray-600);
            border: 1px solid var(--gray-200);
        }
        
        .filter-pills {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
        }
        
        .pill {
            padding: 6px 12px;
            background: var(--white);
            border: 1px solid var(--gray-200);
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            color: var(--gray-600);
            cursor: pointer;
        }
        
        .pill.active {
            background: var(--navy);
            color: var(--white);
            border-color: var(--navy);
        }
        
        .heatmap-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
            padding: 20px;
        }
        
        .heatmap-cell {
            aspect-ratio: 1;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 600;
            color: var(--white);
            cursor: pointer;
            transition: transform 0.15s;
        }
        
        .heatmap-cell:hover {
            transform: scale(1.1);
        }
        
        .heat-low { background: rgba(96, 163, 217, 0.3); color: var(--navy); }
        .heat-medium { background: rgba(96, 163, 217, 0.6); }
        .heat-high { background: var(--sky); }
        .heat-very-high { background: var(--navy); }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-inner">
            <div class="logo">
                <div class="logo-mark">A</div>
                <span style="font-weight: 600; color: var(--navy);">Assiduous Realty Backend</span>
            </div>
            
            <nav class="nav">
                <a href="../dashboard-refined.html" class="nav-link">Dashboard</a>
                <a href="../knowledge-base.html" class="nav-link">Docs</a>
                <a href="./properties.html" class="nav-link">Properties</a>
                <a href="./agents.html" class="nav-link">Agents</a>
                <a href="./clients.html" class="nav-link">Clients</a>
                <a href="./transactions.html" class="nav-link">Transactions</a>
                <a href="#" class="nav-link active">Market</a>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="page-header">
            <h1 style="font-size: 24px; font-weight: 600; color: var(--navy);">Market Analytics</h1>
            <div style="display: flex; gap: 12px;">
                <button class="btn btn-secondary" onclick="generateReport()">📈 Generate Report</button>
                <button class="btn btn-primary" onclick="refreshData()">🔄 Refresh Data</button>
            </div>
        </div>

        <div class="market-overview">
            <div class="metric-card">
                <div class="metric-label">Median Price</div>
                <div class="metric-value">$425K</div>
                <div class="metric-change positive">
                    <span>↑</span> 8.2% YoY
                </div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Avg Days on Market</div>
                <div class="metric-value">32</div>
                <div class="metric-change positive">
                    <span>↓</span> 5 days
                </div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Inventory</div>
                <div class="metric-value">847</div>
                <div class="metric-change negative">
                    <span>↓</span> 12% MoM
                </div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Price per Sq Ft</div>
                <div class="metric-value">$285</div>
                <div class="metric-change positive">
                    <span>↑</span> $15
                </div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Market Score</div>
                <div class="metric-value">82/100</div>
                <div class="metric-change positive">
                    <span>↑</span> Strong Seller's Market
                </div>
            </div>
        </div>

        <div class="filter-pills">
            <div class="pill active" onclick="setTimeframe('1M')">1 Month</div>
            <div class="pill" onclick="setTimeframe('3M')">3 Months</div>
            <div class="pill" onclick="setTimeframe('6M')">6 Months</div>
            <div class="pill" onclick="setTimeframe('1Y')">1 Year</div>
            <div class="pill" onclick="setTimeframe('ALL')">All Time</div>
        </div>

        <div class="charts-grid">
            <div class="chart-card">
                <div class="chart-header">
                    <h3 class="chart-title">Price Trends</h3>
                    <select style="padding: 4px 8px; border: 1px solid var(--gray-200); border-radius: 4px; font-size: 12px;">
                        <option>Austin Metro</option>
                        <option>Downtown</option>
                        <option>Suburbs</option>
                    </select>
                </div>
                <div class="chart-content" id="priceTrends"></div>
            </div>
            
            <div class="chart-card">
                <div class="chart-header">
                    <h3 class="chart-title">Sales Volume</h3>
                    <span style="font-size: 12px; color: var(--gray-500);">Units Sold</span>
                </div>
                <div class="chart-content" id="salesVolume"></div>
            </div>

            <div class="chart-card">
                <div class="chart-header">
                    <h3 class="chart-title">Market Activity Heatmap</h3>
                    <span style="font-size: 12px; color: var(--gray-500);">By Neighborhood</span>
                </div>
                <div class="heatmap-grid" id="activityHeatmap"></div>
            </div>

            <div class="chart-card">
                <div class="chart-header">
                    <h3 class="chart-title">Property Types Distribution</h3>
                    <span style="font-size: 12px; color: var(--gray-500);">Current Inventory</span>
                </div>
                <div class="chart-content" id="propertyTypes"></div>
            </div>
        </div>

        <div class="neighborhoods-table">
            <table>
                <thead>
                    <tr>
                        <th>Neighborhood</th>
                        <th>Median Price</th>
                        <th>Trend</th>
                        <th>Inventory</th>
                        <th>DOM</th>
                        <th>Score</th>
                    </tr>
                </thead>
                <tbody id="neighborhoodsBody">
                    <tr>
                        <td style="font-weight: 600;">Downtown Austin</td>
                        <td>$625,000</td>
                        <td><span class="trend-indicator up">↑ 12.5%</span></td>
                        <td>124</td>
                        <td>28 days</td>
                        <td><span style="color: var(--success); font-weight: 600;">95</span></td>
                    </tr>
                    <tr>
                        <td style="font-weight: 600;">East Austin</td>
                        <td>$485,000</td>
                        <td><span class="trend-indicator up">↑ 15.2%</span></td>
                        <td>89</td>
                        <td>22 days</td>
                        <td><span style="color: var(--success); font-weight: 600;">92</span></td>
                    </tr>
                    <tr>
                        <td style="font-weight: 600;">South Congress</td>
                        <td>$575,000</td>
                        <td><span class="trend-indicator up">↑ 8.7%</span></td>
                        <td>67</td>
                        <td>35 days</td>
                        <td><span style="color: var(--warning); font-weight: 600;">78</span></td>
                    </tr>
                    <tr>
                        <td style="font-weight: 600;">Northwest Hills</td>
                        <td>$725,000</td>
                        <td><span class="trend-indicator up">↑ 5.3%</span></td>
                        <td>156</td>
                        <td>42 days</td>
                        <td><span style="color: var(--warning); font-weight: 600;">72</span></td>
                    </tr>
                    <tr>
                        <td style="font-weight: 600;">Hyde Park</td>
                        <td>$650,000</td>
                        <td><span class="trend-indicator down">↓ 2.1%</span></td>
                        <td>45</td>
                        <td>38 days</td>
                        <td><span style="color: var(--warning); font-weight: 600;">68</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // Generate price trends chart
        function generatePriceTrends() {
            const container = document.getElementById('priceTrends');
            const months = ['Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const values = [380, 395, 410, 425, 445];
            
            container.innerHTML = '';
            months.forEach((month, i) => {
                const bar = document.createElement('div');
                bar.className = 'bar';
                bar.style.height = `${(values[i] / 500) * 200}px`;
                bar.innerHTML = `
                    <div class="bar-value">$${values[i]}K</div>
                    <div class="bar-label">${month}</div>
                `;
                container.appendChild(bar);
            });
        }

        // Generate sales volume chart
        function generateSalesVolume() {
            const container = document.getElementById('salesVolume');
            const months = ['Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const values = [120, 145, 132, 156, 178];
            
            container.innerHTML = '';
            months.forEach((month, i) => {
                const bar = document.createElement('div');
                bar.className = 'bar';
                bar.style.height = `${(values[i] / 200) * 200}px`;
                bar.style.background = 'linear-gradient(to top, var(--accent), rgba(255, 217, 64, 0.6))';
                bar.innerHTML = `
                    <div class="bar-value">${values[i]}</div>
                    <div class="bar-label">${month}</div>
                `;
                container.appendChild(bar);
            });
        }

        // Generate property types chart
        function generatePropertyTypes() {
            const container = document.getElementById('propertyTypes');
            const types = ['Single', 'Condo', 'Town', 'Multi', 'Land'];
            const values = [45, 28, 18, 7, 2];
            
            container.innerHTML = '';
            types.forEach((type, i) => {
                const bar = document.createElement('div');
                bar.className = 'bar';
                bar.style.height = `${(values[i] / 50) * 200}px`;
                bar.style.background = `linear-gradient(to top, var(--navy), rgba(11, 31, 65, ${0.5 + i * 0.1}))`;
                bar.innerHTML = `
                    <div class="bar-value">${values[i]}%</div>
                    <div class="bar-label">${type}</div>
                `;
                container.appendChild(bar);
            });
        }

        // Generate activity heatmap
        function generateHeatmap() {
            const container = document.getElementById('activityHeatmap');
            const neighborhoods = [
                'DT', 'EA', 'SC', 'NH', 'HP', 'WL', 'CP',
                'RR', 'PF', 'LH', 'MU', 'BT', 'TR', 'WC',
                'LS', 'BR', 'GL', 'ST', 'ML', 'AH', 'ZK'
            ];
            
            container.innerHTML = '';
            neighborhoods.forEach(n => {
                const cell = document.createElement('div');
                cell.className = 'heatmap-cell';
                const intensity = Math.random();
                
                if (intensity < 0.25) cell.classList.add('heat-low');
                else if (intensity < 0.5) cell.classList.add('heat-medium');
                else if (intensity < 0.75) cell.classList.add('heat-high');
                else cell.classList.add('heat-very-high');
                
                cell.textContent = n;
                cell.title = `${n}: ${Math.floor(intensity * 100)} activity score`;
                container.appendChild(cell);
            });
        }

        // Filter functions
        function setTimeframe(timeframe) {
            document.querySelectorAll('.pill').forEach(p => p.classList.remove('active'));
            event.target.classList.add('active');
            
            // In a real app, this would fetch new data
            generatePriceTrends();
            generateSalesVolume();
        }

        function generateReport() {
            alert('Market report is being generated. You will receive it via email shortly.');
        }

        function refreshData() {
            // Simulate data refresh
            generatePriceTrends();
            generateSalesVolume();
            generatePropertyTypes();
            generateHeatmap();
            
            // Update timestamp
            const now = new Date();
            console.log(`Data refreshed at ${now.toLocaleTimeString()}`);
        }

        // Initialize charts
        generatePriceTrends();
        generateSalesVolume();
        generatePropertyTypes();
        generateHeatmap();
    </script>
</body>
</html>
