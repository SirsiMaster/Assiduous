<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Development Dashboard - Assiduous Admin</title>
    
    <!-- Assiduous Design System -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/SirsiMaster/sirsi-ui@v0.1.1/dist/sirsi-ui.css">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <link rel="stylesheet" href="../../assiduous.css">
    <link rel="stylesheet" href="../../components/admin-layout.css">
    
    <style>
        /* Admin Layout */
        body {
            margin: 0;
            padding: 0;
            font-family: "Geist Sans", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
            background: var(--white);
        }

        .admin-wrapper {
            display: flex;
            height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 240px;
            background: var(--navy);
            color: var(--white);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: var(--space-lg);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .sidebar-logo {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            color: var(--white);
            text-decoration: none;
        }

        .sidebar-logo svg {
            width: 24px;
            height: 24px;
        }

        .sidebar-logo-text {
            font-size: 18px;
            font-weight: 700;
        }

        .sidebar-nav {
            flex: 1;
            padding: var(--space-md) 0;
        }

        .nav-section {
            margin-bottom: var(--space-lg);
        }

        .nav-section-title {
            padding: 0 var(--space-lg);
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            opacity: 0.6;
            margin-bottom: var(--space-sm);
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-lg);
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.15s;
        }

        .nav-item:hover {
            background: rgba(255,255,255,0.05);
            color: var(--white);
        }

        .nav-item.active {
            background: var(--sky);
            color: var(--white);
        }

        .nav-icon {
            width: 18px;
            height: 18px;
            opacity: 0.8;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Top Bar */
        .topbar {
            background: var(--white);
            border-bottom: 1px solid var(--border);
            padding: var(--space-md) var(--space-xl);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .topbar-actions {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-weight: 600;
            font-size: 12px;
        }

        /* Page Content */
        .page-content {
            flex: 1;
            padding: var(--space-xl);
            overflow-y: auto;
            background: var(--gray-50);
        }

        .page-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: var(--space-xs);
        }

        .page-subtitle {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: var(--space-xl);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-lg);
            margin-bottom: var(--space-2xl);
        }

        .stat-card {
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
            transition: all 0.2s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            inset: 0;
            box-shadow: var(--shadow-md);
            opacity: 0;
            transition: opacity 0.2s;
        }

        .stat-card:hover::before {
            opacity: 1;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            border-color: var(--sky);
        }

        .stat-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--sky);
            transform: scaleX(0);
            transition: transform 0.2s;
        }

        .stat-card:hover::after {
            transform: scaleX(1);
        }

        .stat-label {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: var(--space-sm);
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: var(--space-xs);
        }

        .stat-change {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .stat-change.positive {
            color: var(--success);
        }

        .stat-change.negative {
            color: var(--danger);
        }

        /* Visual Sparklines */
        .stat-spark {
            height: 32px;
            background: var(--gray-50);
            border-radius: var(--radius-sm);
            position: relative;
            overflow: hidden;
            margin-top: var(--space-sm);
        }

        .stat-bars {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 100%;
            display: flex;
            align-items: flex-end;
            gap: 2px;
            padding: 2px;
        }

        .bar {
            flex: 1;
            background: var(--sky);
            opacity: 0.3;
            border-radius: 2px 2px 0 0;
            transition: opacity 0.2s;
        }

        .bar:last-child {
            opacity: 1;
        }

        /* Tooltip Styles */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }

        .tooltip::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--navy);
            color: var(--white);
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 400;
            white-space: nowrap;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
            max-width: 250px;
            text-transform: none;
            letter-spacing: normal;
            line-height: 1.4;
        }

        .tooltip:hover::after {
            opacity: 1;
        }

        .tooltip::before {
            content: '';
            position: absolute;
            bottom: 115%;
            left: 50%;
            transform: translateX(-50%);
            border: 5px solid transparent;
            border-top-color: var(--navy);
            opacity: 0;
            transition: opacity 0.2s;
        }

        .tooltip:hover::before {
            opacity: 1;
        }

        /* Content Grid */
        .content-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: var(--space-xl);
        }

        /* Cards */
        .card {
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-lg);
        }

        .card-header {
            padding: var(--space-lg);
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--dark);
        }

        .card-body {
            padding: var(--space-lg);
        }

        /* Button styles handled by sirsi-button component */

        

        

        

        

        /* Quick Actions */
        .quick-actions {
            display: flex;
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
        }

        /* Activity List */
        .activity-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .activity-item {
            padding: var(--space-md) 0;
            border-bottom: 1px solid var(--gray-100);
            display: flex;
            align-items: start;
            gap: var(--space-sm);
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 11px;
            font-weight: 600;
            flex-shrink: 0;
        }

        .activity-content {
            flex: 1;
        }

        .activity-user {
            font-size: 13px;
            font-weight: 600;
            color: var(--dark);
        }

        .activity-action {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 2px;
        }

        .activity-time {
            font-size: 11px;
            color: var(--text-secondary);
        }

        /* Progress */
        .progress-item {
            margin-bottom: var(--space-lg);
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-sm);
        }

        .progress-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--dark);
        }

        .progress-percentage {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .progress-bar {
            height: 8px;
            background: var(--gray-200);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--sky);
            transition: width 0.3s ease;
        }

        /* Chart Section */
        .chart-container {
            height: 280px;
            padding: var(--space-lg) 0;
        }

        /* Loading State */
        .skeleton {
            background: var(--gray-100);
            position: relative;
            overflow: hidden;
            border-radius: var(--radius-sm);
        }
        
        .skeleton::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: skeleton 1.5s infinite;
        }

        @keyframes skeleton {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                display: none;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .quick-actions {
                flex-direction: column;
            }
        }
        
        /* Enhanced Metrics Styles */
        .status-pill {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            padding: var(--space-xs) var(--space-sm);
            background: rgba(34, 197, 94, 0.1);
            color: #16a34a;
            border-radius: 999px;
            font-size: var(--text-xs);
            font-weight: 500;
        }
        
        .status-dot {
            width: 6px;
            height: 6px;
            background: #16a34a;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: var(--space-md);
        }
        
        .metric-item {
            text-align: center;
            padding: var(--space-md);
            border-radius: var(--radius);
            background: rgba(59, 130, 246, 0.05);
            border: 1px solid rgba(59, 130, 246, 0.1);
            transition: all 0.2s ease;
        }
        
        .metric-item:hover {
            background: rgba(59, 130, 246, 0.08);
            transform: translateY(-1px);
        }
        
        .metric-value {
            font-size: var(--text-xl);
            font-weight: 700;
            color: var(--navy);
            margin-bottom: var(--space-xs);
        }
        
        .metric-label {
            font-size: var(--text-xs);
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 500;
        }
    </style>
    <script defer src="https://cdn.jsdelivr.net/gh/SirsiMaster/sirsi-ui@v0.1.2/dist/sirsi-ui.js"></script>
</head>
<body>
    <div class="admin-wrapper">
        
        <!-- Sidebar Component -->
        <aside class="sidebar" id="sidebar-root" data-active="dev-dashboard">
<div class="sidebar-header">
  <a href="../dashboard.html" class="sidebar-logo">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
      <polyline points="9 22 9 12 15 12 15 22"></polyline>
    </svg>
    <span class="sidebar-logo-text">Admin Portal</span>
  </a>
</div>

<nav class="sidebar-nav">
  <div class="nav-section">
    <div class="nav-section-title">Main</div>
    <a href="../dashboard.html" class="nav-item" data-key="dashboard">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="3" y="3" width="7" height="7"></rect>
        <rect x="14" y="3" width="7" height="7"></rect>
        <rect x="14" y="14" width="7" height="7"></rect>
        <rect x="3" y="14" width="7" height="7"></rect>
      </svg>
      Dashboard
    </a>
    <a href="../analytics.html" class="nav-item" data-key="analytics">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="12" y1="20" x2="12" y2="10"></line>
        <line x1="18" y1="20" x2="18" y2="4"></line>
        <line x1="6" y1="20" x2="6" y2="16"></line>
      </svg>
      Realty Analytics
    </a>
    <a href="../market.html" class="nav-item" data-key="market">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
      </svg>
      Market Analysis
    </a>
  </div>

  <div class="nav-section">
    <div class="nav-section-title">Management</div>
    <a href="../properties.html" class="nav-item" data-key="properties">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
      </svg>
      Properties
    </a>
    <a href="../agents.html" class="nav-item" data-key="agents">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
        <circle cx="9" cy="7" r="4"></circle>
      </svg>
      Agents
    </a>
    <a href="../clients.html" class="nav-item" data-key="clients">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
        <circle cx="12" cy="7" r="4"></circle>
      </svg>
      Clients
    </a>
    <a href="../transactions.html" class="nav-item" data-key="transactions">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="12" y1="1" x2="12" y2="23"></line>
        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
      </svg>
      Transactions
    </a>
  </div>

  <div class="nav-section">
    <div class="nav-section-title">Development</div>
    <a href="../development/dashboard.html" class="nav-item" data-key="dev-dashboard" class="nav-item active">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="16 18 22 12 16 6"></polyline>
        <polyline points="8 6 2 12 8 18"></polyline>
      </svg>
      Dev Dashboard
    </a>
    <a href="../development/costs.html" class="nav-item" data-key="dev-costs">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="12" y1="1" x2="12" y2="23"></line>
        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
      </svg>
      Dev Costs
    </a>
    <a href="../development/analytics.html" class="nav-item" data-key="dev-analytics">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M22 2L11 13"></path>
        <path d="M22 2L15 22L11 13L2 9L22 2Z"></path>
      </svg>
      Dev Analytics
    </a>
    <a href="../development/reports.html" class="nav-item" data-key="dev-reports">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
        <polyline points="14 2 14 8 20 8"></polyline>
        <line x1="16" y1="13" x2="8" y2="13"></line>
        <line x1="16" y1="17" x2="8" y2="17"></line>
      </svg>
      Dev Reports
    </a>
    <a href="../development/docs.html" class="nav-item" data-key="dev-docs">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
      </svg>
      Dev Docs
    </a>
  </div>

  <div class="nav-section">
    <div class="nav-section-title">System</div>
    <a href="../knowledge-base.html" class="nav-item" data-key="knowledge">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
      </svg>
      Knowledge Base
    </a>
    <a href="../contracts/index.html" class="nav-item" data-key="contracts">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
        <polyline points="14 2 14 8 20 8"></polyline>
      </svg>
      Contracts
    </a>
    <a href="../settings.html" class="nav-item" data-key="settings">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="3"></circle>
        <path d="M12 1v6m0 6v6m4.22-13.22l4.24 4.24M1.54 1.54l4.24 4.24M18.46 18.46l4.24 4.24M1.54 18.46l4.24-4.24"></path>
      </svg>
      Settings
    </a>
  </div>
</nav>
</aside>
        <main class="main-content">
            <!-- Standardized Admin Header -->
            <header id="admin-header-root" 
                    data-title="Development Dashboard" 
                    data-subtitle="Real-time development metrics and progress tracking"
                    data-search-placeholder="Search development data..."></header>

            <!-- Page Content -->
            <div class="page-content">

                <!-- Quick Actions -->
                <div class="quick-actions">
                    <a href="costs.html" class="btn btn-primary">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="1" x2="12" y2="23"></line>
                            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                        </svg>
                        View Development Costs
                    </a>
                    <a href="analytics.html" class="btn btn-secondary">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="20" x2="12" y2="10"></line>
                            <line x1="18" y1="20" x2="18" y2="4"></line>
                            <line x1="6" y1="20" x2="6" y2="16"></line>
                        </svg>
                        Dev Analytics
                    </a>
                    <a href="reports.html" class="btn btn-secondary">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        </svg>
                        Generate Reports
                    </a>
                </div>

                <!-- PROJECT TOTALS - Historical Aggregates (Primary Focus) -->
                <div class="section-header" style="margin-bottom: var(--space-lg);">
                    <h3 style="font-size: 18px; font-weight: 600; color: var(--navy);">📊 Project Totals Since August 10, 2025</h3>
                </div>
                <div class="stats-grid">
                    <div class="stat-card sirsi-card sirsi-card--elevated">
                        <div class="stat-label tooltip" data-tooltip="Total hours worked on the Assiduous project">Total Hours</div>
                        <div class="stat-value" id="totalHours">50.25</div>
                        <div class="stat-change" id="avgHoursPerDay">4.57 hrs/day avg</div>
                    </div>
                    
                    <div class="stat-card sirsi-card sirsi-card--elevated">
                        <div class="stat-label tooltip" data-tooltip="Total project cost including labor and tools">Total Cost</div>
                        <div class="stat-value" id="totalCost">$7,988</div>
                        <div class="stat-change" id="costBreakdown">Labor + Tools</div>
                    </div>
                    
                    <div class="stat-card sirsi-card sirsi-card--elevated">
                        <div class="stat-label tooltip" data-tooltip="Total commits in the repository">Total Commits</div>
                        <div class="stat-value" id="totalCommits">196</div>
                        <div class="stat-change" id="velocityRate">17.8/day avg</div>
                    </div>
                    
                    <div class="stat-card sirsi-card sirsi-card--elevated">
                        <div class="stat-label tooltip" data-tooltip="Total files in the repository">Total Files</div>
                        <div class="stat-value" id="totalFiles">38,957</div>
                        <div class="stat-change" id="projectDays">11 active days</div>
                    </div>
                </div>

                <!-- TODAY'S ACTIVITY - Current Session Metrics -->
                <div class="section-header" style="margin-top: var(--space-2xl); margin-bottom: var(--space-lg);">
                    <h3 style="font-size: 18px; font-weight: 600; color: var(--navy);">📅 Today's Activity</h3>
                    <span style="font-size: 12px; color: var(--text-secondary);" id="todayDate"></span>
                </div>
                <div class="stats-grid">
                    <div class="stat-card sirsi-card sirsi-card--elevated">
                        <div class="stat-label tooltip" data-tooltip="Hours worked today">Today's Hours</div>
                        <div class="stat-value" id="todayHours">0.0</div>
                        <div class="stat-change" id="todayHoursStatus">No activity yet</div>
                        <div class="stat-spark">
                            <div class="stat-bars">
                                <div class="bar" style="height: 30%"></div>
                                <div class="bar" style="height: 45%"></div>
                                <div class="bar" style="height: 60%"></div>
                                <div class="bar" style="height: 40%"></div>
                                <div class="bar" style="height: 75%"></div>
                                <div class="bar" style="height: 90%"></div>
                                <div class="bar" style="height: 0%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-card sirsi-card sirsi-card--elevated">
                        <div class="stat-label tooltip" data-tooltip="Development cost for today">Today's Cost</div>
                        <div class="stat-value" id="todayCost">$0</div>
                        <div class="stat-change" id="todayCostRate">$150/hour</div>
                        <div class="stat-spark">
                            <div class="stat-bars">
                                <div class="bar" style="height: 40%"></div>
                                <div class="bar" style="height: 35%"></div>
                                <div class="bar" style="height: 50%"></div>
                                <div class="bar" style="height: 65%"></div>
                                <div class="bar" style="height: 55%"></div>
                                <div class="bar" style="height: 70%"></div>
                                <div class="bar" style="height: 0%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-card sirsi-card sirsi-card--elevated">
                        <div class="stat-label tooltip" data-tooltip="Commits made today">Today's Commits</div>
                        <div class="stat-value" id="todayCommitsCount">0</div>
                        <div class="stat-change" id="todayCommitsChange">0% of average</div>
                        <div class="stat-spark">
                            <div class="stat-bars">
                                <div class="bar" style="height: 60%"></div>
                                <div class="bar" style="height: 0%"></div>
                                <div class="bar" style="height: 80%"></div>
                                <div class="bar" style="height: 100%"></div>
                                <div class="bar" style="height: 90%"></div>
                                <div class="bar" style="height: 0%"></div>
                                <div class="bar" style="height: 0%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-card sirsi-card sirsi-card--elevated">
                        <div class="stat-label tooltip" data-tooltip="This week's development summary">Week Summary</div>
                        <div class="stat-value" id="weekHours">0.0 hrs</div>
                        <div class="stat-change" id="weekCommits">0 commits</div>
                        <div class="stat-spark">
                            <div class="stat-bars">
                                <div class="bar" style="height: 50%"></div>
                                <div class="bar" style="height: 45%"></div>
                                <div class="bar" style="height: 40%"></div>
                                <div class="bar" style="height: 35%"></div>
                                <div class="bar" style="height: 60%"></div>
                                <div class="bar" style="height: 55%"></div>
                                <div class="bar" style="height: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Content Grid -->
                <div class="content-grid">
                    <!-- Activity Chart -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Activity Trend</div>
                            <span style="font-size: var(--text-xs); color: var(--text-secondary);">
                                <span id="todayCommits">0</span> today
                            </span>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="chart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                <!-- Comprehensive Metrics -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Project Metrics</div>
                        <div class="status-pill">
                            <div class="status-dot"></div>
                            Live Data
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="metrics-grid">
                            <div class="metric-item">
                                <div class="metric-value" id="projectCost">$16,200</div>
                                <div class="metric-label">Project Cost</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value" id="activeSessions">12</div>
                                <div class="metric-label">Dev Sessions</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value" id="automationLevel">100%</div>
                                <div class="metric-label">Automation</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value" id="deploymentStatus">✅ Live</div>
                                <div class="metric-label">Status</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Recent Development Activity -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Recent Activity</div>
                        <sirsi-button variant="secondary" size="md">Refresh</sirsi-button>
                    </div>
                    <div class="card-body" style="padding: 0;">
                        <div class="activity-list" id="commits">
                            <div class="activity-item">
                                <div class="skeleton" style="height: 60px;"></div>
                            </div>
                            <div class="activity-item">
                                <div class="skeleton" style="height: 60px;"></div>
                            </div>
                            <div class="activity-item">
                                <div class="skeleton" style="height: 60px;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                </div>

                <!-- Development Progress -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Development Progress</div>
                        <sirsi-button variant="secondary" size="md" onclick="window.location.href='reports.html'">View Details</sirsi-button>
                    </div>
                    <div class="card-body">
                        <div class="progress-item">
                            <div class="progress-header">
                                <div class="progress-title">Phase 1: Foundation Complete</div>
                                <div class="progress-percentage">100%</div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 100%;"></div>
                            </div>
                        </div>
                        
                        <div class="progress-item">
                            <div class="progress-header">
                                <div class="progress-title">Phase 2: AI Integration</div>
                                <div class="progress-percentage">65%</div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 65%;"></div>
                            </div>
                        </div>
                        
                        <div class="progress-item">
                            <div class="progress-header">
                                <div class="progress-title">Phase 3: Launch Preparation</div>
                                <div class="progress-percentage">25%</div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 25%;"></div>
                            </div>
                        </div>
                        
                        <!-- Overall Project Progress -->
                        <div class="progress-item" style="margin-top: var(--space-md); padding-top: var(--space-md); border-top: 1px solid var(--gray-100);">
                            <div class="progress-header">
                                <div class="progress-title" style="font-weight: 600; color: var(--navy);">Overall Project Progress</div>
                                <div class="progress-percentage" style="font-weight: 600; color: var(--navy);">75%</div>
                            </div>
                            <div class="progress-bar" style="height: 8px;">
                                <div class="progress-fill" style="width: 75%; background: linear-gradient(90deg, var(--sky), var(--success));"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    
    <!-- Firebase Configuration -->
    <script>
        // Firebase configuration for Assiduous Production
        window.firebaseConfig = {
            apiKey: "AIzaSyCYlJs10_cdfakekey_RdbxVB6Zjk",
            authDomain: "assiduous-prod.firebaseapp.com",
            projectId: "assiduous-prod",
            storageBucket: "assiduous-prod.appspot.com",
            messagingSenderId: "123456789012",
            appId: "1:123456789012:web:abcdef123456789",
            measurementId: "G-XXXXXXXXXX"
        };
    </script>
    
    <!-- Development Metrics Service -->
    <script src="../../assets/js/services/developmentmetricsservice.js"></script>
    
    <script>
        // Dashboard Data
        let chart = null;
        let metricsService = null;

        async function init() {
            // Trigger metrics update on load (runs in background)
            triggerMetricsUpdate();
            
            // Initialize Firebase if configured
            try {
                if (typeof firebase !== 'undefined' && window.firebaseConfig) {
                    firebase.initializeApp(window.firebaseConfig);
                    await window.developmentmetricsservice.initialize();
                    metricsService = window.developmentmetricsservice;
                    console.log('Firebase metrics service initialized');
                }
            } catch (error) {
                console.log('Firebase not configured, using fallback data');
            }
            
            await loadMetrics();
            createChart();
            
            // Auto-refresh every 30 seconds for real-time updates
            setInterval(() => {
                loadMetrics();
            }, 30 * 1000);
            
            // Update metrics every 5 minutes as requested
            setInterval(() => {
                triggerMetricsUpdate();
                loadMetrics();
                console.log('Auto-refresh: Loading latest metrics from Firebase');
            }, 5 * 60 * 1000);
        }
        
        async function triggerMetricsUpdate() {
            try {
                // Try to trigger server-side update if available
                // This will fail on static hosting but work with a backend
                const response = await fetch('/api/update-metrics', { 
                    method: 'POST',
                    mode: 'no-cors'
                });
                console.log('Metrics update triggered');
            } catch (e) {
                // Silently fail - metrics will be updated by git hooks or manual runs
                console.debug('Background metrics update not available');
            }
        }

        async function loadMetrics() {
            try {
                // First try to load cached metrics with real data
                const cacheResponse = await fetch('metrics_cache.json');
                if (cacheResponse.ok) {
                    const cachedMetrics = await cacheResponse.json();
                    console.log('Loaded accurate metrics from cache:', cachedMetrics);
                    updateDashboardMetrics(cachedMetrics);
                    
                    // Load recent activity from development history
                    const activity = await loadRecentActivity();
                    displayActivity(activity);
                    return;
                }
            } catch (cacheError) {
                console.log('Cache not available, trying Firebase...');
            }
            
            try {
                // Fallback to Firebase service
                const metrics = metricsService ? 
                    await metricsService.getDashboardMetrics() : 
                    getFallbackMetrics();
                
                updateDashboardMetrics(metrics);
                
                // Get recent activity
                const activity = metricsService ? 
                    await metricsService.getRecentActivity(8) : 
                    getFallbackActivity();
                
                displayActivity(activity);
            } catch (error) {
                console.error('Error loading metrics data:', error);
                // Fallback to showing local data if service fails
                showOfflineNotice();
            }
        }

        function updateDashboardMetrics(metrics) {
            // Update date display
            document.getElementById('todayDate').textContent = new Date().toLocaleDateString('en-US', { 
                weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' 
            });
            
            // Update PROJECT TOTALS (Historical)
            document.getElementById('totalHours').textContent = metrics.project?.totalHours || '50.25';
            document.getElementById('avgHoursPerDay').textContent = `${metrics.project?.avgHoursPerDay || '4.57'} hrs/day avg`;
            
            document.getElementById('totalCost').textContent = `$${parseInt(metrics.project?.totalCost || '7988').toLocaleString()}`;
            document.getElementById('costBreakdown').textContent = `$${parseInt(metrics.project?.laborCost || '7538')} labor + $${parseInt(metrics.project?.toolsCost || '450')} tools`;
            
            document.getElementById('totalCommits').textContent = metrics.project?.totalCommits || '196';
            document.getElementById('velocityRate').textContent = `${metrics.project?.velocity || '17.8'}/day avg`;
            
            document.getElementById('totalFiles').textContent = (metrics.project?.totalFiles || '38957').toLocaleString();
            document.getElementById('projectDays').textContent = `${metrics.project?.totalDays || '11'} active days`;
            
            // Update TODAY'S ACTIVITY
            const todayHours = parseFloat(metrics.today?.hours || 0);
            document.getElementById('todayHours').textContent = todayHours.toFixed(1);
            document.getElementById('todayHoursStatus').textContent = todayHours > 0 ? 
                `${todayHours.toFixed(1)} hrs worked` : 'No activity yet';
            
            const todayCost = parseFloat(metrics.today?.cost || 0);
            document.getElementById('todayCost').textContent = `$${todayCost.toFixed(0)}`;
            document.getElementById('todayCostRate').textContent = '$150/hour';
            
            const todayCommits = parseInt(metrics.today?.commits || 0);
            document.getElementById('todayCommitsCount').textContent = todayCommits;
            document.getElementById('todayCommits').textContent = todayCommits; // For chart header
            const avgCommits = parseFloat(metrics.project?.velocity || 17.8);
            const percentOfAvg = avgCommits > 0 ? Math.round((todayCommits / avgCommits) * 100) : 0;
            document.getElementById('todayCommitsChange').textContent = todayCommits > 0 ? 
                `${percentOfAvg}% of average` : 'No commits yet';
            
            // Update WEEK SUMMARY
            document.getElementById('weekHours').textContent = `${metrics.thisWeek?.hours || '0.0'} hrs`;
            document.getElementById('weekCommits').textContent = `${metrics.thisWeek?.commits || '0'} commits`;
            
            // Update Project Metrics card
            if (document.getElementById('projectCost')) {
                document.getElementById('projectCost').textContent = `$${parseInt(metrics.project?.totalCost || '7988').toLocaleString()}`;
            }
            if (document.getElementById('activeSessions')) {
                document.getElementById('activeSessions').textContent = metrics.project?.totalDays || '11';
            }
            if (document.getElementById('automationLevel')) {
                document.getElementById('automationLevel').textContent = '100%';
            }
            if (document.getElementById('deploymentStatus')) {
                document.getElementById('deploymentStatus').textContent = '✅ Live';
            }
            
            // Update the page with timestamp
            console.log(`Dashboard updated at ${new Date().toLocaleString()} - Accurate metrics loaded`);
        }

        function displayActivity(activities) {
            const container = document.getElementById('commits');
            container.innerHTML = activities.map(activity => {
                const sha = activity.id ? activity.id.substring(0, 7) : 'N/A';
                const authorInitial = activity.author ? activity.author.charAt(0).toUpperCase() : 'A';
                
                return `
                    <div class="activity-item" style="padding: var(--space-md); border-bottom: 1px solid var(--gray-100); cursor: pointer;" onmouseover="this.style.background='var(--gray-50)'" onmouseout="this.style.background=''">
                        <div class="activity-avatar" style="background: var(--gradient);">${authorInitial}</div>
                        <div class="activity-content">
                            <div class="activity-user">${activity.author || 'Developer'}</div>
                            <div class="activity-action">${activity.message || 'Development activity'}</div>
                            <span style="display: inline-block; margin-top: var(--space-xs); padding: 2px 6px; background: var(--gray-50); border-radius: var(--radius-sm); font-family: 'SF Mono', Monaco, monospace; font-size: 11px; color: var(--text-secondary);">${sha}</span>
                        </div>
                        <div class="activity-time">${activity.timeAgo || 'Recently'}</div>
                    </div>
                `;
            }).join('');
        }

        function createChart() {
            const ctx = document.getElementById('chart').getContext('2d');
            
            const labels = [];
            const data = [];
            
            // Generate 7-day trend data (this could come from Firebase aggregations in the future)
            for (let i = 6; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                labels.push(date.toLocaleDateString('en', { weekday: 'short' }));
                
                // For now, use sample data - in production this would come from Firebase daily metrics
                const sampleData = [0, 2, 1, 5, 8, 15, 32]; // Represents activity progression
                data.push(sampleData[6-i] || 0);
            }
            
            chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels,
                    datasets: [{
                        data,
                        borderColor: '#60A3D9',
                        backgroundColor: 'rgba(96, 163, 217, 0.05)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: true,
                        pointBackgroundColor: '#60A3D9',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 3,
                        pointHoverRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: '#0B1F41',
                            titleFont: { size: 11 },
                            bodyFont: { size: 11 },
                            padding: 8,
                            cornerRadius: 4,
                            displayColors: false
                        }
                    },
                    scales: {
                        x: {
                            grid: { display: false },
                            ticks: {
                                color: '#6B7280',
                                font: { size: 11 }
                            }
                        },
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: '#F3F4F6',
                                borderDash: [2, 2]
                            },
                            ticks: {
                                color: '#6B7280',
                                font: { size: 11 },
                                stepSize: 1
                            }
                        }
                    }
                }
            });
        }

        function getTimeAgo(date) {
            const seconds = Math.floor((new Date() - date) / 1000);
            const intervals = {
                year: 31536000,
                month: 2592000,
                week: 604800,
                day: 86400,
                hour: 3600,
                minute: 60
            };
            
            for (const [unit, secondsInUnit] of Object.entries(intervals)) {
                const interval = Math.floor(seconds / secondsInUnit);
                if (interval >= 1) {
                    return `${interval} ${unit}${interval > 1 ? 's' : ''} ago`;
                }
            }
            return 'just now';
        }

        async function loadRecentActivity() {
            try {
                // Try to load from Firebase upload data
                const response = await fetch('../../data/development_history/firebase_upload_data.json');
                if (response.ok) {
                    const data = await response.json();
                    if (data.sessions && data.sessions.length > 0) {
                        return data.sessions.map(session => ({
                            id: session.sessionId?.substring(0, 7) || 'N/A',
                            author: session.author || 'Developer',
                            message: session.commits?.[0]?.message || session.description || 'Development activity',
                            timeAgo: formatTimeAgo(session.date)
                        }));
                    }
                }
            } catch (e) {
                console.log('Could not load activity from history');
            }
            // Return recent actual commits
            return [
                { id: '28b3f56', author: 'Admin', message: 'refactor: improve breadcrumb UX and add logout to header', timeAgo: '1 hour ago' },
                { id: '56a2fe7', author: 'Admin', message: 'feat: add smart breadcrumb navigation and back button', timeAgo: '2 hours ago' },
                { id: 'a25fee1', author: 'Admin', message: 'fix: add missing admin-header.js script to costs page', timeAgo: '3 hours ago' },
                { id: 'c7d4884', author: 'Admin', message: 'refactor: convert all paths and filenames to lowercase', timeAgo: '4 hours ago' },
                { id: 'd63d09e', author: 'Admin', message: 'fix: correct sidebar navigation links', timeAgo: '5 hours ago' },
                { id: '08b6864', author: 'Admin', message: 'feat: standardize naming to assiduousflip.web.app', timeAgo: '6 hours ago' },
                { id: 'bd4cf63', author: 'Admin', message: 'fix: correct component paths in admin pages', timeAgo: '7 hours ago' },
                { id: '4e7ee9f', author: 'Admin', message: 'feat: complete directory reorganization', timeAgo: '8 hours ago' }
            ];
        }
        
        function formatTimeAgo(dateStr) {
            if (!dateStr) return 'Recently';
            const date = new Date(dateStr);
            const now = new Date();
            const diff = now - date;
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const days = Math.floor(hours / 24);
            
            if (days > 0) return `${days} day${days > 1 ? 's' : ''} ago`;
            if (hours > 0) return `${hours} hour${hours > 1 ? 's' : ''} ago`;
            return 'Just now';
        }

        function refresh() {
            // Show loading state
            document.getElementById('commits').innerHTML = `
                <div class="activity-item"><div class="skeleton" style="height: 60px;"></div></div>
                <div class="activity-item"><div class="skeleton" style="height: 60px;"></div></div>
                <div class="activity-item"><div class="skeleton" style="height: 60px;"></div></div>
            `;
            
            // Reload data
            loadMetrics().then(() => {
                // Update chart if needed
                if (chart) {
                    chart.destroy();
                    createChart();
                }
            });
        }

        function showDetail(type) {
            const details = {
                // PROJECT TOTAL DRILL-DOWNS
                'total-hours': {
                    title: '⏱️ Total Hours Breakdown',
                    content: `
                        <div style="padding: 20px;">
                            <h3 style="color: var(--navy); margin-bottom: 16px;">50.25 Total Hours Worked</h3>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin-bottom: 20px;">
                                <div style="background: var(--gray-50); padding: 16px; border-radius: 8px;">
                                    <div style="font-size: 28px; font-weight: 700; color: var(--success);">50.25</div>
                                    <div style="font-size: 12px; color: var(--text-secondary);">Total Hours</div>
                                </div>
                                <div style="background: var(--gray-50); padding: 16px; border-radius: 8px;">
                                    <div style="font-size: 28px; font-weight: 700; color: var(--navy);">4.57</div>
                                    <div style="font-size: 12px; color: var(--text-secondary);">Avg Hours/Day</div>
                                </div>
                            </div>
                            <h4 style="margin-bottom: 12px;">Daily Breakdown</h4>
                            <div style="max-height: 300px; overflow-y: auto; background: var(--gray-50); padding: 12px; border-radius: 8px;">
                                <div style="font-family: monospace; font-size: 12px; line-height: 1.8;">
                                    2025-08-10: 8.5 hours<br>
                                    2025-08-15: 7.25 hours<br>
                                    2025-08-23: 6.0 hours<br>
                                    2025-08-30: 5.75 hours<br>
                                    2025-09-02: 4.5 hours<br>
                                    2025-09-03: 3.25 hours<br>
                                    2025-09-04: 4.0 hours<br>
                                    2025-09-05: 3.5 hours<br>
                                    2025-09-06: 4.75 hours<br>
                                    2025-09-07: 2.75 hours
                                </div>
                            </div>
                        </div>
                    `
                },
                'total-cost': {
                    title: '💰 Total Cost Analysis',
                    content: `
                        <div style="padding: 20px;">
                            <h3 style="color: var(--navy); margin-bottom: 16px;">Project Cost: $7,988</h3>
                            <div style="display: grid; gap: 16px; margin-bottom: 20px;">
                                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 12px; color: white;">
                                    <div style="font-size: 32px; font-weight: 700;">$7,988</div>
                                    <div style="font-size: 14px; opacity: 0.9;">Total Project Investment</div>
                                </div>
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                                    <div style="background: var(--gray-50); padding: 16px; border-radius: 8px;">
                                        <div style="font-size: 24px; font-weight: 700; color: var(--navy);">$7,538</div>
                                        <div style="font-size: 12px; color: var(--text-secondary);">Labor Cost (94.4%)</div>
                                    </div>
                                    <div style="background: var(--gray-50); padding: 16px; border-radius: 8px;">
                                        <div style="font-size: 24px; font-weight: 700; color: var(--navy);">$450</div>
                                        <div style="font-size: 12px; color: var(--text-secondary);">Tools Cost (5.6%)</div>
                                    </div>
                                </div>
                            </div>
                            <h4 style="margin-bottom: 12px;">Cost Breakdown</h4>
                            <ul style="list-style: none; padding: 0;">
                                <li style="padding: 8px; background: var(--gray-50); margin-bottom: 8px; border-radius: 6px;">
                                    👨‍💻 Development Rate: <strong>$150/hour</strong>
                                </li>
                                <li style="padding: 8px; background: var(--gray-50); margin-bottom: 8px; border-radius: 6px;">
                                    🔧 Tools & Services: <strong>$225/month</strong>
                                </li>
                                <li style="padding: 8px; background: var(--gray-50); margin-bottom: 8px; border-radius: 6px;">
                                    📅 Project Duration: <strong>2 months</strong>
                                </li>
                                <li style="padding: 8px; background: var(--gray-50); border-radius: 6px;">
                                    📊 Average Cost/Day: <strong>$726</strong>
                                </li>
                            </ul>
                        </div>
                    `
                },
                'total-commits': {
                    title: '📝 Total Commits Analysis',
                    content: `
                        <div style="padding: 20px;">
                            <h3 style="color: var(--navy); margin-bottom: 16px;">196 Total Commits</h3>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-bottom: 20px;">
                                <div style="background: var(--gray-50); padding: 12px; border-radius: 6px; text-align: center;">
                                    <div style="font-size: 24px; font-weight: 700; color: var(--sky);">196</div>
                                    <div style="font-size: 11px; color: var(--text-secondary);">Total</div>
                                </div>
                                <div style="background: var(--gray-50); padding: 12px; border-radius: 6px; text-align: center;">
                                    <div style="font-size: 24px; font-weight: 700; color: var(--navy);">17.8</div>
                                    <div style="font-size: 11px; color: var(--text-secondary);">Per Day</div>
                                </div>
                                <div style="background: var(--gray-50); padding: 12px; border-radius: 6px; text-align: center;">
                                    <div style="font-size: 24px; font-weight: 700; color: var(--success);">3.9</div>
                                    <div style="font-size: 11px; color: var(--text-secondary);">Per Hour</div>
                                </div>
                            </div>
                            <h4 style="margin-bottom: 12px;">Commit Patterns</h4>
                            <div style="background: var(--gray-50); padding: 16px; border-radius: 8px;">
                                <div style="margin-bottom: 12px;">📈 Highest Day: <strong>32 commits</strong></div>
                                <div style="margin-bottom: 12px;">🕒 Most Active: <strong>Morning (9am-12pm)</strong></div>
                                <div style="margin-bottom: 12px;">📅 Active Days: <strong>11 of 28 days (39%)</strong></div>
                                <div>🎯 Consistency: <strong>Very High</strong></div>
                            </div>
                        </div>
                    `
                },
                'total-files': {
                    title: '📁 Repository Files',
                    content: `
                        <div style="padding: 20px;">
                            <h3 style="color: var(--navy); margin-bottom: 16px;">38,957 Total Files</h3>
                            <div style="background: var(--gray-50); padding: 16px; border-radius: 8px; margin-bottom: 16px;">
                                <h4 style="margin-bottom: 12px;">File Distribution</h4>
                                <div style="display: grid; gap: 8px; font-size: 14px;">
                                    <div>📄 HTML/Templates: <strong>~15,000 files</strong></div>
                                    <div>🎨 CSS/Styles: <strong>~8,000 files</strong></div>
                                    <div>⚙️ JavaScript: <strong>~10,000 files</strong></div>
                                    <div>🖼️ Images/Assets: <strong>~5,000 files</strong></div>
                                    <div>📝 Documentation: <strong>~957 files</strong></div>
                                </div>
                            </div>
                            <div style="background: var(--gray-50); padding: 16px; border-radius: 8px;">
                                <h4 style="margin-bottom: 12px;">Key Directories</h4>
                                <ul style="margin: 0; padding-left: 20px;">
                                    <li>/admin - Admin portal</li>
                                    <li>/assets - Resources & media</li>
                                    <li>/components - Reusable components</li>
                                    <li>/firebase-migration-package - Firebase config</li>
                                    <li>/scripts - Build & utility scripts</li>
                                </ul>
                            </div>
                        </div>
                    `
                },
                // TODAY'S ACTIVITY DRILL-DOWNS
                'today-hours': {
                    title: '📅 Today\'s Hours',
                    content: `
                        <div style="padding: 20px;">
                            <h3 style="color: var(--navy); margin-bottom: 16px;">Today's Work Session</h3>
                            <div style="background: var(--gray-50); padding: 16px; border-radius: 8px;">
                                <div style="margin-bottom: 12px;">No activity recorded yet today.</div>
                                <div style="font-size: 14px; color: var(--text-secondary);">Start working to see your metrics update in real-time!</div>
                            </div>
                        </div>
                    `
                },
                'today-cost': {
                    title: '💵 Today\'s Cost',
                    content: `
                        <div style="padding: 20px;">
                            <h3 style="color: var(--navy); margin-bottom: 16px;">Today's Development Cost</h3>
                            <div style="background: var(--gray-50); padding: 16px; border-radius: 8px;">
                                <div style="font-size: 32px; font-weight: 700; color: var(--navy); margin-bottom: 8px;">$0</div>
                                <div style="font-size: 14px; color: var(--text-secondary);">No billable hours today yet</div>
                                <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border);">
                                    <div>Hourly Rate: <strong>$150/hour</strong></div>
                                    <div>Minimum Session: <strong>0.5 hours</strong></div>
                                </div>
                            </div>
                        </div>
                    `
                },
                'today-commits': {
                    title: '📝 Today\'s Commits',
                    content: `
                        <div style="padding: 20px;">
                            <h3 style="color: var(--navy); margin-bottom: 16px;">Today's Git Activity</h3>
                            <div style="background: var(--gray-50); padding: 16px; border-radius: 8px;">
                                <div style="font-size: 24px; font-weight: 700; color: var(--navy); margin-bottom: 8px;">0 commits</div>
                                <div style="font-size: 14px; color: var(--text-secondary);">No commits yet today</div>
                                <div style="margin-top: 16px;">
                                    <div>Daily Average: <strong>17.8 commits</strong></div>
                                    <div>Weekly Target: <strong>125 commits</strong></div>
                                </div>
                            </div>
                        </div>
                    `
                },
                'week-summary': {
                    title: '📆 Week Summary',
                    content: `
                        <div style="padding: 20px;">
                            <h3 style="color: var(--navy); margin-bottom: 16px;">This Week's Progress</h3>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 16px;">
                                <div style="background: var(--gray-50); padding: 16px; border-radius: 8px;">
                                    <div style="font-size: 24px; font-weight: 700; color: var(--navy);">0</div>
                                    <div style="font-size: 12px; color: var(--text-secondary);">Hours This Week</div>
                                </div>
                                <div style="background: var(--gray-50); padding: 16px; border-radius: 8px;">
                                    <div style="font-size: 24px; font-weight: 700; color: var(--sky);">0</div>
                                    <div style="font-size: 12px; color: var(--text-secondary);">Commits This Week</div>
                                </div>
                            </div>
                            <div style="background: var(--gray-50); padding: 16px; border-radius: 8px;">
                                <h4 style="margin-bottom: 8px;">Week Goals</h4>
                                <div style="font-size: 14px; line-height: 1.6;">
                                    ✅ Complete Firebase migration<br>
                                    ✅ Implement development metrics<br>
                                    ⬜ Deploy to production<br>
                                    ⬜ Update documentation
                                </div>
                            </div>
                        </div>
                    `
                },
                // Legacy mappings for existing code
                commits: {
                    title: 'Commit Statistics',
                    content: `
                        <div style="padding: 20px;">
                            <h3 style="color: var(--navy); margin-bottom: 16px;">Total Commits: 196</h3>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
                                <div style="background: var(--gray-50); padding: 12px; border-radius: 6px;">
                                    <div style="font-size: 24px; font-weight: 700; color: var(--navy);">196</div>
                                    <div style="font-size: 12px; color: var(--text-secondary);">Total Commits</div>
                                </div>
                                <div style="background: var(--gray-50); padding: 12px; border-radius: 6px;">
                                    <div style="font-size: 24px; font-weight: 700; color: var(--navy);">125</div>
                                    <div style="font-size: 12px; color: var(--text-secondary);">Weekly Average</div>
                                </div>
                            </div>
                        </div>
                    `
                },
                files: {
                    title: 'File Statistics',
                    content: `
                        <div style="padding: 20px;">
                            <h3 style="color: var(--navy); margin-bottom: 16px;">Repository Files</h3>
                            <div style="background: var(--gray-50); padding: 16px; border-radius: 8px;">
                                <div style="margin-bottom: 12px;">
                                    <strong>Estimated Files:</strong> ${Math.floor(commits.length * 2.5)}
                                </div>
                                <div style="margin-bottom: 12px;">
                                    <strong>Main Directory:</strong> /
                                </div>
                                <div>
                                    <strong>Key Files:</strong>
                                    <ul style="margin-top: 8px; padding-left: 20px;">
                                        <li>dashboard.html (this file)</li>
                                        <li>index.html (main platform)</li>
                                        <li>admin/dashboard.html (admin portal)</li>
                                    </ul>
                                </div>
                            </div>
                            <a href="https://github.com/${GITHUB_OWNER}/${GITHUB_REPO}" target="_blank" 
                               style="display: inline-block; margin-top: 16px; padding: 8px 16px; background: var(--sky); color: white; text-decoration: none; border-radius: 6px;">
                               View on GitHub →
                            </a>
                        </div>
                    `
                },
                activity: {
                    title: 'Activity Details',
                    content: `
                        <div style="padding: 20px;">
                            <h3 style="color: var(--navy); margin-bottom: 16px;">Development Activity</h3>
                            <div style="display: grid; gap: 12px;">
                                <div style="background: var(--gray-50); padding: 12px; border-radius: 6px;">
                                    <strong>Days Active:</strong> ${document.getElementById('daysActive').textContent}
                                </div>
                                <div style="background: var(--gray-50); padding: 12px; border-radius: 6px;">
                                    <strong>First Commit:</strong> ${commits.length > 0 ? new Date(commits[commits.length - 1].commit.author.date).toLocaleDateString() : 'N/A'}
                                </div>
                                <div style="background: var(--gray-50); padding: 12px; border-radius: 6px;">
                                    <strong>Last Commit:</strong> ${commits.length > 0 ? new Date(commits[0].commit.author.date).toLocaleDateString() : 'N/A'}
                                </div>
                                <div style="background: var(--gray-50); padding: 12px; border-radius: 6px;">
                                    <strong>Most Active Day:</strong> ${getMostActiveDay()}
                                </div>
                            </div>
                        </div>
                    `
                },
                velocity: {
                    title: 'Velocity Metrics',
                    content: `
                        <div style="padding: 20px;">
                            <h3 style="color: var(--navy); margin-bottom: 16px;">Development Velocity</h3>
                            <div style="background: var(--gray-50); padding: 16px; border-radius: 8px;">
                                <div style="margin-bottom: 12px;">
                                    <strong>Current Velocity:</strong> ${document.getElementById('velocity').textContent} commits/day
                                </div>
                                <div style="margin-bottom: 12px;">
                                    <strong>Peak Velocity:</strong> ${getPeakVelocity()} commits/day
                                </div>
                                <div>
                                    <strong>Trend:</strong> ${getVelocityTrend()}
                                </div>
                            </div>
                            <p style="margin-top: 16px; color: var(--text-secondary); font-size: 13px;">
                                Velocity measures the average number of commits per day, indicating development momentum.
                            </p>
                        </div>
                    `
                }
            };

            if (details[type]) {
                showModal(details[type].title, details[type].content);
            }
        }

        // Helper Functions
        function getWeeklyAverage() {
            const weekAgo = new Date();
            weekAgo.setDate(weekAgo.getDate() - 7);
            const weekCommits = commits.filter(c => new Date(c.commit.author.date) > weekAgo).length;
            return (weekCommits / 7).toFixed(1);
        }

        function getContributors() {
            const contributors = {};
            commits.forEach(c => {
                const name = c.commit.author.name;
                contributors[name] = (contributors[name] || 0) + 1;
            });
            
            return Object.entries(contributors)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 5)
                .map(([name, count]) => `
                    <div style="display: flex; justify-content: space-between; padding: 8px; background: var(--gray-50); border-radius: 6px; margin-bottom: 8px;">
                        <span>${name}</span>
                        <span style="color: var(--sky); font-weight: 600;">${count} commits</span>
                    </div>
                `).join('');
        }

        function getMostActiveDay() {
            const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            const dayCount = {};
            commits.forEach(c => {
                const day = days[new Date(c.commit.author.date).getDay()];
                dayCount[day] = (dayCount[day] || 0) + 1;
            });
            
            let maxDay = 'N/A';
            let maxCount = 0;
            for (const [day, count] of Object.entries(dayCount)) {
                if (count > maxCount) {
                    maxCount = count;
                    maxDay = day;
                }
            }
            return maxDay;
        }

        function getPeakVelocity() {
            // Calculate peak velocity from the last 30 days
            let maxVelocity = 0;
            const dates = {};
            
            commits.forEach(c => {
                const date = new Date(c.commit.author.date).toDateString();
                dates[date] = (dates[date] || 0) + 1;
            });
            
            for (const count of Object.values(dates)) {
                if (count > maxVelocity) maxVelocity = count;
            }
            
            return maxVelocity;
        }

        function getVelocityTrend() {
            const recent = commits.slice(0, 10).length;
            const older = commits.slice(10, 20).length;
            
            if (recent > older) return '📈 Increasing';
            if (recent < older) return '📉 Decreasing';
            return '➡️ Stable';
        }

        // Modal System
        function showModal(title, content) {
            // Create modal if it doesn't exist
            let modal = document.getElementById('modal');
            if (!modal) {
                modal = document.createElement('div');
                modal.id = 'modal';
                modal.style.cssText = `
                    position: fixed;
                    inset: 0;
                    background: rgba(0, 0, 0, 0.5);
                    backdrop-filter: blur(4px);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 1000;
                `;
                document.body.appendChild(modal);
            }

            modal.innerHTML = `
                <div style="background: var(--white); border-radius: 12px; width: min(600px, 90vw); max-height: 80vh; overflow: hidden; box-shadow: 0 20px 25px rgba(0,0,0,0.15);">
                    <div style="padding: 20px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center;">
                        <h2 style="color: var(--navy); font-size: 18px; font-weight: 600; flex: 1;">${title}</h2>
                        <sirsi-button variant="secondary" size="md" onclick="closeModal()">×</sirsi-button>
                    </div>
                    <div style="max-height: 60vh; overflow-y: auto;">
                        ${content}
                    </div>
                    <div style="padding: 16px; border-top: 1px solid var(--border); display: flex; justify-content: flex-end;">
                        <sirsi-button variant="ghost" size="md" onclick="closeModal()">Close</sirsi-button>
                    </div>
                </div>
            `;

            modal.style.display = 'flex';
            modal.onclick = (e) => {
                if (e.target === modal) closeModal();
            };
        }

        function closeModal() {
            const modal = document.getElementById('modal');
            if (modal) {
                modal.style.display = 'none';
            }
        }
        
        // Show offline notice if GitHub API fails
        function showOfflineNotice() {
            console.warn('GitHub API unavailable, using cached data');
            // Fallback data if API fails
            document.getElementById('totalCommits').textContent = '127+';
            document.getElementById('filesChanged').textContent = '255+';
            document.getElementById('daysActive').textContent = '29+';
            document.getElementById('velocity').textContent = '2.9';
            document.getElementById('todayCommits').textContent = '0';
        }

        // Initialize
        window.addEventListener('DOMContentLoaded', init);
    </script>
    
    <!-- Load Sidebar Component -->
    <!-- Sidebar pre-rendered, no JS needed -->
    <script src="../../components/admin-header.js"></script>
</body>
</html>
